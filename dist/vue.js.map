{"version":3,"file":"vue.js","sources":["../src/compiler/generate.js","../src/compiler/parser.js","../src/compiler/index.js","../src/vdom/patch.js","../src/observer/dep.js","../src/utils.js","../src/observer/scheduler.js","../src/observer/watcher.js","../src/lifecycle.js","../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-22 21:30:18\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-24 20:12:11\n */\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\nfunction genProps(attrs) {\n  let str = '';\n  for (let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i];\n    if (attr.name === 'style') {\n      let styleObj = {};\n      attr.value.replace(/([^;:]+)\\:([^;:]+)/g, function () {\n        styleObj[arguments[1].trim()] = arguments[2].trim();\n      });\n      attr.value = styleObj;\n    }\n    str += `${attr.name}: ${JSON.stringify(attr.value)},`;\n  }\n  return `{${str.slice(0, -1)}}`;\n}\n\nfunction genChildren(el) {\n  let children = el.children;\n\n  if (children) {\n    return children.map((child) => gen(child)).join(',');\n  }\n  return false;\n}\n\nfunction gen(el) {\n  if (el.type == 1) {\n    return generate(el);\n  } else {\n    let text = el.text.trim();\n    if (!defaultTagRE.test(text)) {\n      return `_v('${text}')`;\n    } else {\n      let tokens = [];\n      let match;\n      // exec和正则中的g冲突, 每次操作的时候都要重置成0\n      let lastIndex = (defaultTagRE.lastIndex = 0);\n      while ((match = defaultTagRE.exec(text))) {\n        let index = match.index;\n        if (index > lastIndex) {\n          tokens.push(JSON.stringify(text.slice(lastIndex, index)));\n        }\n        tokens.push(`_s(${match[1].trim()})`);\n        lastIndex = index + match[0].length;\n      }\n      if (lastIndex < text.length) {\n        tokens.push(JSON.stringify(text.slice(lastIndex)));\n      }\n      return `_v(${tokens.join('+')})`;\n    }\n  }\n}\n\nexport function generate(el) {\n  let children = genChildren(el);\n\n  let code = `_c('${el.tag}',${\n    el.attrs && el.attrs.length > 0 ? genProps(el.attrs) : 'undefined'\n  }${children ? `,${children}` : ''})`;\n\n  return code;\n}\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-22 21:17:10\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-22 21:18:21\n */\n\n// 标签名\nconst ncname = `[a-zA-Z_][\\\\w\\\\-\\\\.]*`;\n// 获取标签名, match[1]\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\n// 开始标签\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\n// 结束标签\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\n// 属性\nconst attribute =\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\n// 标签关闭\nconst startTagClose = /^\\s*(\\/?)>/;\n// {{}}\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\nexport function parserHTML(html) {\n  let stack = [];\n  let root = null;\n  function createASTElement(tag, attrs, parent) {\n    return {\n      tag,\n      type: 1,\n      children: [],\n      parent,\n      attrs,\n    };\n  }\n  function start(tag, attrs) {\n    // console.log(\"start\", tag, attrs);\n    let parent = stack[stack.length - 1];\n    let element = createASTElement(tag, attrs, parent);\n    if (root == null) {\n      root = element;\n    }\n    if (parent) {\n      // 元素指向父节点\n      element.parent = parent;\n      // 父节点的children属性添加元素\n      parent.children.push(element);\n    }\n    stack.push(element);\n  }\n\n  function end(tag) {\n    // console.log(\"end\", tag);\n    let endTag = stack.pop();\n    if (endTag.tag != tag) {\n      console.log(\"标签出错\");\n    }\n  }\n\n  function text(chars) {\n    // console.log(\"text\", chars);\n    let parent = stack[stack.length - 1];\n    chars.replace(/\\s/, \"\");\n    if (chars) {\n      parent.children.push({\n        type: 2,\n        text: chars,\n      });\n    }\n  }\n\n  function advance(len) {\n    html = html.substring(len);\n  }\n  function parseStartTag() {\n    const start = html.match(startTagOpen);\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: [],\n      };\n      advance(start[0].length);\n      // console.log(match, html);\n      let end;\n      let attr;\n      // 不能是开始的结束标签\n      // 必须是属性\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5],\n        });\n        advance(attr[0].length);\n      }\n      // console.log(\"end\", end);\n      if (end) {\n        advance(end[0].length);\n      }\n\n      return match;\n    } else {\n      return false;\n    }\n  }\n\n  while (html) {\n    let index = html.indexOf(\"<\");\n\n    if (index === 0) {\n      // 解析开始标签\n      const startTagMatch = parseStartTag();\n\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n      let endTagMatch;\n      if ((endTagMatch = html.match(endTag))) {\n        end(endTagMatch[1]);\n        advance(endTagMatch[0].length);\n        continue;\n      }\n\n      break;\n    }\n    // 文本\n    if (index > 0) {\n      let chars = html.substring(0, index);\n      if (chars) {\n        text(chars);\n        advance(chars.length);\n      }\n    }\n  }\n  console.log(\"root\", root);\n  return root;\n}\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-21 20:40:53\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-23 21:16:27\n */\n\nimport { generate } from \"./generate\";\nimport { parserHTML } from \"./parser\";\n\nexport function compileToFunction(tempalte) {\n  const ast = parserHTML(tempalte);\n\n  let code = generate(ast);\n  console.log(\"code\", code);\n  // html => ast(只能描述语法) => render函数 => vdom(增加额外属性) => 生成真实DOM\n  // new Function + width\n  let render = new Function(`with(this) {return ${code}}`);\n  return render;\n}\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-24 19:46:04\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-24 20:22:35\n */\nexport function patch(oldVnode, vnode) {\n  if (oldVnode.nodeType == 1) {\n    console.log(\"真实节点\");\n    const parentElm = oldVnode.parentNode;\n\n    let elm = createEle(vnode);\n    parentElm.insertBefore(elm, oldVnode.nextSibling);\n    parentElm.removeChild(oldVnode);\n    return elm;\n  }\n}\n\nexport function createEle(vnode) {\n  let { tag, data, children, text, vm } = vnode;\n  if (typeof tag === \"string\") {\n    vnode.el = document.createElement(tag);\n    updateProperties(vnode);\n    children.forEach((child) => {\n      vnode.el.appendChild(createEle(child));\n    });\n  } else {\n    vnode.el = document.createTextNode(text);\n  }\n  return vnode.el;\n}\n\nfunction updateProperties(vnode) {\n  let newProps = vnode.data || {};\n  let el = vnode.el;\n  for (let key in newProps) {\n    if (key == \"style\") {\n      for (let styleName in newProps.style) {\n        el.style[styleName] = newProps.style[styleName];\n      }\n    } else {\n      el.setAttribute(key, newProps[key]);\n    }\n  }\n}\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-24 20:35:31\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-24 21:20:18\n */\n\nlet id = 0;\n// 每个属性都分配一个dep, dep可以存放watcher, 一个dep对应多个watcher, 一个watcher对应多个dep\nclass Dep {\n  constructor() {\n    this.id = id++;\n    this.subs = [];\n  }\n  depend() {\n    if (Dep.target) {\n      Dep.target.addDep(this);\n    }\n  }\n  addSub(watcher) {\n    this.subs.push(watcher);\n  }\n  notify() {\n    this.subs.forEach((watcher) => watcher.update());\n  }\n}\n\nDep.target = null;\n\nexport function pushTarget(watcher) {\n  Dep.target = watcher;\n}\nexport function popTarget(watcher) {\n  Dep.target = null;\n}\n\nexport default Dep;\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-17 21:35:20\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-24 22:00:49\n */\nexport const isFunction = (fn) => typeof fn === 'function';\nexport const isObject = (obj) => typeof obj === 'object' && obj !== null;\nexport const isArray = (arr) => Array.isArray(arr);\n\nconst callbacks = [];\nlet pending = false;\n\nconst flushCallbacks = () => {\n  callbacks.forEach((cb) => cb());\n  pending = false;\n};\n\n/**\n * 调度系统的优雅降级\n *\n * @param {*} flushCallbacks\n */\nfunction timer(flushCallbacks) {\n  let timerFn = () => {};\n\n  if (Promise) {\n    timerFn = () => {\n      Promise.resolve().then(flushCallbacks);\n    };\n  } else if (MutationObserver) {\n    let textNode = document.createTextNode('1');\n    let observe = new MutationObserver(flushCallbacks);\n    observe.observe(textNode, {\n      characterData: true,\n    });\n    timerFn = () => {\n      textNode.textContent = '3';\n    };\n  } else if (setImmediate) {\n    timerFn = () => {\n      setImmediate(flushCallbacks);\n    };\n  } else {\n    timerFn = () => {\n      setTimeout(flushCallbacks);\n    };\n  }\n  timerFn();\n}\n\nexport function nextTick(cb) {\n  callbacks.push(cb);\n\n  if (!pending) {\n    timer(flushCallbacks);\n    pending = true;\n  }\n}\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-24 21:33:35\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-24 21:39:22\n */\n\nimport { nextTick } from '../utils';\n\nlet queue = [];\nlet has = {};\n\nlet pending = false;\nexport function queueWatcher(watcher) {\n  const id = watcher;\n  if (has[id] == null) {\n    queue.push(watcher);\n    has[id] = true;\n    if (!pending) {\n      nextTick(flushSchedulerQueue, 0);\n      pending = true;\n    }\n  }\n}\n\nfunction flushSchedulerQueue() {\n  for (let i = 0; i < queue.length; i++) {\n    queue[i].run();\n  }\n  queue = [];\n  has = {};\n  pending = false;\n}\n","import { popTarget, pushTarget } from \"./dep\";\nimport { queueWatcher } from \"./scheduler\";\n\n/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-24 20:25:22\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-24 21:38:12\n */\nlet id = 0;\nclass Watcher {\n  constructor(vm, exprOrFn, cb, options) {\n    this.vm = vm;\n    this.exprOrFn = exprOrFn;\n    this.cb = cb;\n    this.options = options;\n    this.id = id++;\n    // exprOrFn一调用就会取值\n    this.getter = exprOrFn;\n    this.deps = [];\n    this.depsId = new Set();\n    // 默认的初始化操作\n    this.get();\n  }\n  // 数据更新时, 重新调用getter\n  get() {\n    // 每个属性都可以收集自己的watcher, 一个属性对应多个watcher, 一个watcher对应多个属性\n    // Dep.target = watcher\n    pushTarget(this);\n    // render()方法会去vm上取值, vm._update(vm._render())\n    this.getter();\n    // Dep.target = null, 如果Dep.target有值, 说明值在模板中使用了\n    popTarget();\n  }\n  addDep(dep) {\n    let id = dep.id;\n    // 实现去重\n    if (!this.depsId.has(id)) {\n      // watcher收集dep\n      this.depsId.add(id);\n      this.deps.push(dep);\n      // dep收集watcher\n      dep.addSub(this);\n    }\n  }\n  update() {\n    // this.get();\n    queueWatcher(this);\n  }\n  run() {\n    this.get();\n  }\n}\n\n// 将更新功能封装成了一个watcher\n// 渲染页面前, 会将当前watcher放到Dep类上\n// 在vue找那个渲染页面使用的属性, 需要进行依赖收集, 收集对象的渲染watcher\n// 取值时, 给每个属性都加了dep属性, 用于存储这个渲染watcher, 同一个watcher会对应多个dep\n// 每给属性可能对应多个视图(多个watcher), 一个属性对应多个watcher\n// dep.depend(), 通知dep存放watcher => Dep.target.addDep(), 通知watcher存放dep\n// dep和wathcer是双向取值的\nexport default Watcher;\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-23 21:18:30\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-24 21:49:08\n */\n\nimport { patch } from \"./vdom/patch\";\nimport Watcher from \"./observer/watcher\";\nimport { nextTick } from \"./utils\";\n\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function (vnode) {\n    console.log(\"_update\");\n    const vm = this;\n    vm.$el = patch(vm.$el, vnode);\n  };\n  Vue.prototype.$nextTick = nextTick;\n}\n\nexport function mountComponent(vm, el) {\n  // 更新函数, 数据变化后会再次调用\n  let updateComponent = () => {\n    // 调用render函数, 生成虚拟dom\n    vm._update(vm._render());\n    // 用虚拟dom生成真实dom\n  };\n  // updateComponent();\n  // true表示这是一个渲染watcher\n  // 每个组件都对一个渲染watcher\n  new Watcher(\n    vm,\n    updateComponent,\n    () => {\n      console.log(\"udpate\");\n    },\n    true\n  );\n}\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-21 20:23:55\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-21 20:50:04\n */\nconst oldArrayPrototype = Array.prototype;\nconst arrayMethods = Object.create(oldArrayPrototype);\n\nconst methods = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'reverse',\n  'sort',\n];\n\nmethods.forEach((method) => {\n  arrayMethods[method] = function (...args) {\n    oldArrayPrototype[method].call(this, ...args);\n    let inserted;\n    let ob = this.__ob__;\n    switch (method) {\n      case 'push':\n      case 'unshfit':\n        inserted = args; // 就是新增的内容\n        break;\n      case 'splice':\n        inserted = args.slice(2);\n        break;\n      default:\n        break;\n    }\n    if (inserted) {\n      ob.observeArray(inserted);\n    }\n    // 数组的observe.dep\n    ob.dep.notify();\n  };\n});\n\nexport default arrayMethods;\n","import { isArray, isObject } from '../utils';\nimport arrayMethods from './array';\nimport Dep from './dep';\n\n/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-17 21:38:12\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-24 21:10:10\n */\n\n// 给对象新增一个属性, 不会触发更新, 可以通过$set, 给对象本身增加一个dep, dep存watcher, 如果增加一个属性后, 手动触发watcher\nclass Observer {\n  constructor(data) {\n    this.dep = new Dep();\n    // 给对象和数组添加一个自定义属性\n    // __ob__ 会造成死循环\n    Object.defineProperty(data, '__ob__', {\n      value: this,\n      // 这属性不能被枚举, 无法被循环到\n      enumerable: false,\n    });\n    // data.__ob__ = this;\n    if (isArray(data)) {\n      // 重写数组方法\n      data.__proto__ = arrayMethods;\n      this.observeArray(data);\n    } else {\n      this.walk(data);\n    }\n  }\n  // 递归遍历数组, 对数组内部的对象再次进行重写[[]] [{}]\n  observeArray(data) {\n    // 数组里面如果是引用类型, 继续进行observe, 响应式\n    data.forEach((item) => observe(item));\n  }\n  walk(data) {\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key]);\n    });\n  }\n}\n\n/**\n * 数组的子元素还是数组的情况\n *\n * @param {*} value\n */\nfunction dependArray(value) {\n  for (let i = 0; i < value.length; i++) {\n    const current = value[i];\n    current.__ob__ && current.__ob__.dep.depend();\n    if (isArray(current)) {\n      dependArray(current);\n    }\n  }\n}\n\nfunction defineReactive(data, key, value) {\n  // value有可能是对象\n  // 如果value是对象, 需要进行递归处理\n  let childOb = observe(value);\n  console.log('childOb', childOb);\n  // 每个属性都对应一个dep\n  let dep = new Dep();\n  Object.defineProperty(data, key, {\n    get() {\n      // 如果Dep.target有值, 说明属性在模板中被使用了\n      if (Dep.target) {\n        // dep记住watcher\n        dep.depend();\n        // 可能是数组, 可能是对象\n        if (childOb) {\n          // 数组和对象也记住watcher\n          childOb.dep.depend();\n          if (isArray(value)) {\n            dependArray(value);\n          }\n        }\n      }\n      return value;\n    },\n    set(newVal) {\n      if (newVal === value) return;\n      // 设置了新对象, 需要重新进行劫持\n      observe(newVal);\n      value = newVal;\n      dep.notify();\n    },\n  });\n}\n\nexport function observe(data) {\n  // console.log(\"observe\", data);\n  // 不是对象不处理\n  if (!isObject(data)) {\n    return;\n  }\n  // 已经响应式的对象不处理\n  if (data.__ob__) {\n    return data.__ob__;\n  }\n  return new Observer(data);\n}\n\n// 1. Vue中对象层次不能嵌套太深, 否则会有大量递归\n// 2. Vue中对象是通过Object.definePrototype实现响应式的, 拦截了get和set, 如果不存在的属性不会拦截, 也不会响应\n//    可以使用$set来让对象自己来实现notify, 或者赋予一个新对象\n// 3. Vue中数组修改索引或者长度也不会进行视图更新, 通过修改原型的7个方法从而达成视图更新, 数组中如果是对象类型, 修改对象也可以更新视图\n","import { observe } from \"./observer\";\nimport { isFunction } from \"./utils\";\n\n/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-17 21:29:52\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-21 20:10:58\n */\nexport function initState(vm) {\n  console.log(\"initState\", vm.$options);\n  const opts = vm.$options;\n  // if (opts.props) {\n  // }\n\n  // if (opts.methods) {\n  // }\n\n  if (opts.data) {\n    initData(vm);\n  }\n\n  // if (opts.computed) {\n  // }\n\n  // if (opts.watch) {\n  // }\n}\n\nfunction proxy(vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key];\n    },\n    set(newVal) {\n      vm[source][key] = newVal;\n    },\n  });\n}\n\nfunction initData(vm) {\n  let data = vm.$options.data;\n  data = vm._data = isFunction(data) ? data.call(vm) : data;\n  for (const key in data) {\n    proxy(vm, \"_data\", key);\n  }\n  // console.log(\"initData\", data);\n  observe(data);\n}\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-17 21:24:30\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-24 19:44:19\n */\n\nimport { compileToFunction } from \"./compiler\";\nimport { mountComponent } from \"./lifecycle\";\nimport { initState } from \"./state\";\n\n/**\n *\n * 在Vue的基础上做一次混合操作\n * @export\n * @param {*} Vue\n */\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    // console.log(\"options\", options);\n    const vm = this;\n    vm.$options = options;\n    initState(vm);\n\n    if (vm.$options.el) {\n      // 将数据挂在模板上\n      vm.$mount(vm.$options.el);\n    }\n  };\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    const options = vm.$options;\n    el = document.querySelector(el);\n    vm.$el = el;\n    if (!options.render) {\n      let template = options.template;\n      if (!template && el) {\n        console.log(\"el\", el);\n        template = el.outerHTML;\n        let render = compileToFunction(template);\n        options.render = render;\n      }\n    }\n    console.log(options.render);\n    // 组件的挂载流程\n    mountComponent(vm, el);\n  };\n}\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-23 21:31:22\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-23 21:35:54\n */\nexport function createElement(vm, tag, data = {}, ...children) {\n  return vnode(vm, tag, data, data.key, children, undefined);\n}\n\nexport function createTextElement(vm, text) {\n  return vnode(vm, undefined, undefined, undefined, undefined, text);\n}\n\nfunction vnode(vm, tag, data, key, children, text) {\n  return { vm, tag, data, key, children, text };\n}\n","import { isObject } from './utils';\nimport { createElement, createTextElement } from './vdom';\n\n/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-23 21:23:10\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-24 19:59:20\n */\nexport function renderMixin(Vue) {\n  Vue.prototype._c = function (tag, data, ...children) {\n    // @ts-ignore\n    return createElement(this, ...arguments);\n  };\n  Vue.prototype._v = function (text) {\n    return createTextElement(this, text);\n  };\n  Vue.prototype._s = function (val) {\n    if (isObject(val)) {\n      return JSON.stringify(val);\n    }\n    return val;\n  };\n  Vue.prototype._render = function () {\n    console.log('_render');\n    const vm = this;\n    let render = vm.$options.render;\n    let vnode = render.call(vm);\n    return vnode;\n  };\n}\n","import { initMixin } from \"./init\";\nimport { lifecycleMixin } from \"./lifecycle\";\nimport { renderMixin } from \"./render\";\n\n/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-17 21:07:28\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-23 21:23:40\n */\nfunction Vue(options) {\n  this._init(options);\n}\n\ninitMixin(Vue);\nrenderMixin(Vue); // _render\nlifecycleMixin(Vue); // _update\n\nexport default Vue;\n"],"names":["defaultTagRE","genProps","attrs","str","i","length","attr","name","styleObj","value","replace","arguments","trim","JSON","stringify","slice","genChildren","el","children","map","child","gen","join","type","generate","text","test","tokens","match","lastIndex","exec","index","push","code","tag","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parserHTML","html","stack","root","createASTElement","parent","start","element","end","pop","console","log","chars","advance","len","substring","parseStartTag","tagName","indexOf","startTagMatch","endTagMatch","compileToFunction","tempalte","ast","render","Function","patch","oldVnode","vnode","nodeType","parentElm","parentNode","elm","createEle","insertBefore","nextSibling","removeChild","data","vm","document","createElement","updateProperties","forEach","appendChild","createTextNode","newProps","key","styleName","style","setAttribute","id","Dep","subs","target","addDep","watcher","update","pushTarget","popTarget","isFunction","fn","isObject","obj","isArray","arr","Array","callbacks","pending","flushCallbacks","cb","timer","timerFn","Promise","resolve","then","MutationObserver","textNode","observe","characterData","textContent","setImmediate","setTimeout","nextTick","queue","has","queueWatcher","flushSchedulerQueue","run","Watcher","exprOrFn","options","getter","deps","depsId","Set","get","dep","add","addSub","lifecycleMixin","Vue","prototype","_update","$el","$nextTick","mountComponent","updateComponent","_render","oldArrayPrototype","arrayMethods","Object","create","methods","method","args","call","inserted","ob","__ob__","observeArray","notify","Observer","defineProperty","enumerable","__proto__","walk","item","keys","defineReactive","dependArray","current","depend","childOb","set","newVal","initState","$options","opts","initData","proxy","source","_data","initMixin","_init","$mount","querySelector","template","outerHTML","undefined","createTextElement","renderMixin","_c","_v","_s","val"],"mappings":";;;;;;EAAA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,IAAMA,YAAY,GAAG,0BAArB;;EAEA,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;EACvB,MAAIC,GAAG,GAAG,EAAV;;EACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,KAAK,CAACG,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;EACrC,QAAIE,IAAI,GAAGJ,KAAK,CAACE,CAAD,CAAhB;;EACA,QAAIE,IAAI,CAACC,IAAL,KAAc,OAAlB,EAA2B;EAAA;EACzB,YAAIC,QAAQ,GAAG,EAAf;EACAF,QAAAA,IAAI,CAACG,KAAL,CAAWC,OAAX,CAAmB,qBAAnB,EAA0C,YAAY;EACpDF,UAAAA,QAAQ,CAACG,SAAS,CAAC,CAAD,CAAT,CAAaC,IAAb,EAAD,CAAR,GAAgCD,SAAS,CAAC,CAAD,CAAT,CAAaC,IAAb,EAAhC;EACD,SAFD;EAGAN,QAAAA,IAAI,CAACG,KAAL,GAAaD,QAAb;EALyB;EAM1B;;EACDL,IAAAA,GAAG,cAAOG,IAAI,CAACC,IAAZ,eAAqBM,IAAI,CAACC,SAAL,CAAeR,IAAI,CAACG,KAApB,CAArB,MAAH;EACD;;EACD,oBAAWN,GAAG,CAACY,KAAJ,CAAU,CAAV,EAAa,CAAC,CAAd,CAAX;EACD;;EAED,SAASC,WAAT,CAAqBC,EAArB,EAAyB;EACvB,MAAIC,QAAQ,GAAGD,EAAE,CAACC,QAAlB;;EAEA,MAAIA,QAAJ,EAAc;EACZ,WAAOA,QAAQ,CAACC,GAAT,CAAa,UAACC,KAAD;EAAA,aAAWC,GAAG,CAACD,KAAD,CAAd;EAAA,KAAb,EAAoCE,IAApC,CAAyC,GAAzC,CAAP;EACD;;EACD,SAAO,KAAP;EACD;;EAED,SAASD,GAAT,CAAaJ,EAAb,EAAiB;EACf,MAAIA,EAAE,CAACM,IAAH,IAAW,CAAf,EAAkB;EAChB,WAAOC,QAAQ,CAACP,EAAD,CAAf;EACD,GAFD,MAEO;EACL,QAAIQ,IAAI,GAAGR,EAAE,CAACQ,IAAH,CAAQb,IAAR,EAAX;;EACA,QAAI,CAACZ,YAAY,CAAC0B,IAAb,CAAkBD,IAAlB,CAAL,EAA8B;EAC5B,2BAAcA,IAAd;EACD,KAFD,MAEO;EACL,UAAIE,MAAM,GAAG,EAAb;EACA,UAAIC,KAAJ,CAFK;;EAIL,UAAIC,SAAS,GAAI7B,YAAY,CAAC6B,SAAb,GAAyB,CAA1C;;EACA,aAAQD,KAAK,GAAG5B,YAAY,CAAC8B,IAAb,CAAkBL,IAAlB,CAAhB,EAA0C;EACxC,YAAIM,KAAK,GAAGH,KAAK,CAACG,KAAlB;;EACA,YAAIA,KAAK,GAAGF,SAAZ,EAAuB;EACrBF,UAAAA,MAAM,CAACK,IAAP,CAAYnB,IAAI,CAACC,SAAL,CAAeW,IAAI,CAACV,KAAL,CAAWc,SAAX,EAAsBE,KAAtB,CAAf,CAAZ;EACD;;EACDJ,QAAAA,MAAM,CAACK,IAAP,cAAkBJ,KAAK,CAAC,CAAD,CAAL,CAAShB,IAAT,EAAlB;EACAiB,QAAAA,SAAS,GAAGE,KAAK,GAAGH,KAAK,CAAC,CAAD,CAAL,CAASvB,MAA7B;EACD;;EACD,UAAIwB,SAAS,GAAGJ,IAAI,CAACpB,MAArB,EAA6B;EAC3BsB,QAAAA,MAAM,CAACK,IAAP,CAAYnB,IAAI,CAACC,SAAL,CAAeW,IAAI,CAACV,KAAL,CAAWc,SAAX,CAAf,CAAZ;EACD;;EACD,0BAAaF,MAAM,CAACL,IAAP,CAAY,GAAZ,CAAb;EACD;EACF;EACF;;EAEM,SAASE,QAAT,CAAkBP,EAAlB,EAAsB;EAC3B,MAAIC,QAAQ,GAAGF,WAAW,CAACC,EAAD,CAA1B;EAEA,MAAIgB,IAAI,iBAAUhB,EAAE,CAACiB,GAAb,eACNjB,EAAE,CAACf,KAAH,IAAYe,EAAE,CAACf,KAAH,CAASG,MAAT,GAAkB,CAA9B,GAAkCJ,QAAQ,CAACgB,EAAE,CAACf,KAAJ,CAA1C,GAAuD,WADjD,SAELgB,QAAQ,cAAOA,QAAP,IAAoB,EAFvB,MAAR;EAIA,SAAOe,IAAP;EACD;;ECvED;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;EACA,IAAME,MAAM,0BAAZ;;EAEA,IAAMC,YAAY,iBAAUD,MAAV,kBAAwBA,MAAxB,MAAlB;;EAEA,IAAME,YAAY,GAAG,IAAIC,MAAJ,aAAgBF,YAAhB,EAArB;;EAEA,IAAMG,MAAM,GAAG,IAAID,MAAJ,gBAAmBF,YAAnB,YAAf;;EAEA,IAAMI,SAAS,GACb,2EADF;;EAGA,IAAMC,aAAa,GAAG,YAAtB;EAIO,SAASC,UAAT,CAAoBC,IAApB,EAA0B;EAC/B,MAAIC,KAAK,GAAG,EAAZ;EACA,MAAIC,IAAI,GAAG,IAAX;;EACA,WAASC,gBAAT,CAA0BZ,GAA1B,EAA+BhC,KAA/B,EAAsC6C,MAAtC,EAA8C;EAC5C,WAAO;EACLb,MAAAA,GAAG,EAAHA,GADK;EAELX,MAAAA,IAAI,EAAE,CAFD;EAGLL,MAAAA,QAAQ,EAAE,EAHL;EAIL6B,MAAAA,MAAM,EAANA,MAJK;EAKL7C,MAAAA,KAAK,EAALA;EALK,KAAP;EAOD;;EACD,WAAS8C,KAAT,CAAed,GAAf,EAAoBhC,KAApB,EAA2B;EACzB;EACA,QAAI6C,MAAM,GAAGH,KAAK,CAACA,KAAK,CAACvC,MAAN,GAAe,CAAhB,CAAlB;EACA,QAAI4C,OAAO,GAAGH,gBAAgB,CAACZ,GAAD,EAAMhC,KAAN,EAAa6C,MAAb,CAA9B;;EACA,QAAIF,IAAI,IAAI,IAAZ,EAAkB;EAChBA,MAAAA,IAAI,GAAGI,OAAP;EACD;;EACD,QAAIF,MAAJ,EAAY;EACV;EACAE,MAAAA,OAAO,CAACF,MAAR,GAAiBA,MAAjB,CAFU;;EAIVA,MAAAA,MAAM,CAAC7B,QAAP,CAAgBc,IAAhB,CAAqBiB,OAArB;EACD;;EACDL,IAAAA,KAAK,CAACZ,IAAN,CAAWiB,OAAX;EACD;;EAED,WAASC,GAAT,CAAahB,GAAb,EAAkB;EAChB;EACA,QAAIK,MAAM,GAAGK,KAAK,CAACO,GAAN,EAAb;;EACA,QAAIZ,MAAM,CAACL,GAAP,IAAcA,GAAlB,EAAuB;EACrBkB,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;EACD;EACF;;EAED,WAAS5B,IAAT,CAAc6B,KAAd,EAAqB;EACnB;EACA,QAAIP,MAAM,GAAGH,KAAK,CAACA,KAAK,CAACvC,MAAN,GAAe,CAAhB,CAAlB;EACAiD,IAAAA,KAAK,CAAC5C,OAAN,CAAc,IAAd,EAAoB,EAApB;;EACA,QAAI4C,KAAJ,EAAW;EACTP,MAAAA,MAAM,CAAC7B,QAAP,CAAgBc,IAAhB,CAAqB;EACnBT,QAAAA,IAAI,EAAE,CADa;EAEnBE,QAAAA,IAAI,EAAE6B;EAFa,OAArB;EAID;EACF;;EAED,WAASC,OAAT,CAAiBC,GAAjB,EAAsB;EACpBb,IAAAA,IAAI,GAAGA,IAAI,CAACc,SAAL,CAAeD,GAAf,CAAP;EACD;;EACD,WAASE,aAAT,GAAyB;EACvB,QAAMV,KAAK,GAAGL,IAAI,CAACf,KAAL,CAAWS,YAAX,CAAd;;EACA,QAAIW,KAAJ,EAAW;EACT,UAAMpB,KAAK,GAAG;EACZ+B,QAAAA,OAAO,EAAEX,KAAK,CAAC,CAAD,CADF;EAEZ9C,QAAAA,KAAK,EAAE;EAFK,OAAd;EAIAqD,MAAAA,OAAO,CAACP,KAAK,CAAC,CAAD,CAAL,CAAS3C,MAAV,CAAP,CALS;;EAOT,UAAI6C,IAAJ;;EACA,UAAI5C,IAAJ,CARS;EAUT;;EACA,aACE,EAAE4C,IAAG,GAAGP,IAAI,CAACf,KAAL,CAAWa,aAAX,CAAR,MACCnC,IAAI,GAAGqC,IAAI,CAACf,KAAL,CAAWY,SAAX,CADR,CADF,EAGE;EACAZ,QAAAA,KAAK,CAAC1B,KAAN,CAAY8B,IAAZ,CAAiB;EACfzB,UAAAA,IAAI,EAAED,IAAI,CAAC,CAAD,CADK;EAEfG,UAAAA,KAAK,EAAEH,IAAI,CAAC,CAAD,CAAJ,IAAWA,IAAI,CAAC,CAAD,CAAf,IAAsBA,IAAI,CAAC,CAAD;EAFlB,SAAjB;EAIAiD,QAAAA,OAAO,CAACjD,IAAI,CAAC,CAAD,CAAJ,CAAQD,MAAT,CAAP;EACD,OApBQ;;;EAsBT,UAAI6C,IAAJ,EAAS;EACPK,QAAAA,OAAO,CAACL,IAAG,CAAC,CAAD,CAAH,CAAO7C,MAAR,CAAP;EACD;;EAED,aAAOuB,KAAP;EACD,KA3BD,MA2BO;EACL,aAAO,KAAP;EACD;EACF;;EAED,SAAOe,IAAP,EAAa;EACX,QAAIZ,KAAK,GAAGY,IAAI,CAACiB,OAAL,CAAa,GAAb,CAAZ;;EAEA,QAAI7B,KAAK,KAAK,CAAd,EAAiB;EACf;EACA,UAAM8B,aAAa,GAAGH,aAAa,EAAnC;;EAEA,UAAIG,aAAJ,EAAmB;EACjBb,QAAAA,KAAK,CAACa,aAAa,CAACF,OAAf,EAAwBE,aAAa,CAAC3D,KAAtC,CAAL;EACA;EACD;;EACD,UAAI4D,WAAW,SAAf;;EACA,UAAKA,WAAW,GAAGnB,IAAI,CAACf,KAAL,CAAWW,MAAX,CAAnB,EAAwC;EACtCW,QAAAA,GAAG,CAACY,WAAW,CAAC,CAAD,CAAZ,CAAH;EACAP,QAAAA,OAAO,CAACO,WAAW,CAAC,CAAD,CAAX,CAAezD,MAAhB,CAAP;EACA;EACD;;EAED;EACD,KAnBU;;;EAqBX,QAAI0B,KAAK,GAAG,CAAZ,EAAe;EACb,UAAIuB,KAAK,GAAGX,IAAI,CAACc,SAAL,CAAe,CAAf,EAAkB1B,KAAlB,CAAZ;;EACA,UAAIuB,KAAJ,EAAW;EACT7B,QAAAA,IAAI,CAAC6B,KAAD,CAAJ;EACAC,QAAAA,OAAO,CAACD,KAAK,CAACjD,MAAP,CAAP;EACD;EACF;EACF;;EACD+C,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBR,IAApB;EACA,SAAOA,IAAP;EACD;;EC7ID;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAKO,SAASkB,iBAAT,CAA2BC,QAA3B,EAAqC;EAC1C,MAAMC,GAAG,GAAGvB,UAAU,CAACsB,QAAD,CAAtB;EAEA,MAAI/B,IAAI,GAAGT,QAAQ,CAACyC,GAAD,CAAnB;EACAb,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBpB,IAApB,EAJ0C;EAM1C;;EACA,MAAIiC,MAAM,GAAG,IAAIC,QAAJ,8BAAmClC,IAAnC,OAAb;EACA,SAAOiC,MAAP;EACD;;ECrBD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACO,SAASE,KAAT,CAAeC,QAAf,EAAyBC,KAAzB,EAAgC;EACrC,MAAID,QAAQ,CAACE,QAAT,IAAqB,CAAzB,EAA4B;EAC1BnB,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;EACA,QAAMmB,SAAS,GAAGH,QAAQ,CAACI,UAA3B;EAEA,QAAIC,GAAG,GAAGC,SAAS,CAACL,KAAD,CAAnB;EACAE,IAAAA,SAAS,CAACI,YAAV,CAAuBF,GAAvB,EAA4BL,QAAQ,CAACQ,WAArC;EACAL,IAAAA,SAAS,CAACM,WAAV,CAAsBT,QAAtB;EACA,WAAOK,GAAP;EACD;EACF;EAEM,SAASC,SAAT,CAAmBL,KAAnB,EAA0B;EAC/B,MAAMpC,GAAN,GAAwCoC,KAAxC,CAAMpC,GAAN;EAAA,MAAwCoC,KAAxC,CAAWS,IAAX;EAAA,UAAiB7D,QAAjB,GAAwCoD,KAAxC,CAAiBpD,QAAjB;EAAA,MAA2BO,IAA3B,GAAwC6C,KAAxC,CAA2B7C,IAA3B;EAAA,MAAwC6C,KAAxC,CAAiCU;;EACjC,MAAI,OAAO9C,GAAP,KAAe,QAAnB,EAA6B;EAC3BoC,IAAAA,KAAK,CAACrD,EAAN,GAAWgE,QAAQ,CAACC,aAAT,CAAuBhD,GAAvB,CAAX;EACAiD,IAAAA,gBAAgB,CAACb,KAAD,CAAhB;EACApD,IAAAA,QAAQ,CAACkE,OAAT,CAAiB,UAAChE,KAAD,EAAW;EAC1BkD,MAAAA,KAAK,CAACrD,EAAN,CAASoE,WAAT,CAAqBV,SAAS,CAACvD,KAAD,CAA9B;EACD,KAFD;EAGD,GAND,MAMO;EACLkD,IAAAA,KAAK,CAACrD,EAAN,GAAWgE,QAAQ,CAACK,cAAT,CAAwB7D,IAAxB,CAAX;EACD;;EACD,SAAO6C,KAAK,CAACrD,EAAb;EACD;;EAED,SAASkE,gBAAT,CAA0Bb,KAA1B,EAAiC;EAC/B,MAAIiB,QAAQ,GAAGjB,KAAK,CAACS,IAAN,IAAc,EAA7B;EACA,MAAI9D,EAAE,GAAGqD,KAAK,CAACrD,EAAf;;EACA,OAAK,IAAIuE,GAAT,IAAgBD,QAAhB,EAA0B;EACxB,QAAIC,GAAG,IAAI,OAAX,EAAoB;EAClB,WAAK,IAAIC,SAAT,IAAsBF,QAAQ,CAACG,KAA/B,EAAsC;EACpCzE,QAAAA,EAAE,CAACyE,KAAH,CAASD,SAAT,IAAsBF,QAAQ,CAACG,KAAT,CAAeD,SAAf,CAAtB;EACD;EACF,KAJD,MAIO;EACLxE,MAAAA,EAAE,CAAC0E,YAAH,CAAgBH,GAAhB,EAAqBD,QAAQ,CAACC,GAAD,CAA7B;EACD;EACF;EACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EC9CD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA,IAAII,IAAE,GAAG,CAAT;;MAEMC;EACJ,iBAAc;EAAA;;EACZ,SAAKD,EAAL,GAAUA,IAAE,EAAZ;EACA,SAAKE,IAAL,GAAY,EAAZ;EACD;;;;aACD,kBAAS;EACP,UAAID,GAAG,CAACE,MAAR,EAAgB;EACdF,QAAAA,GAAG,CAACE,MAAJ,CAAWC,MAAX,CAAkB,IAAlB;EACD;EACF;;;aACD,gBAAOC,OAAP,EAAgB;EACd,WAAKH,IAAL,CAAU9D,IAAV,CAAeiE,OAAf;EACD;;;aACD,kBAAS;EACP,WAAKH,IAAL,CAAUV,OAAV,CAAkB,UAACa,OAAD;EAAA,eAAaA,OAAO,CAACC,MAAR,EAAb;EAAA,OAAlB;EACD;;;;;;EAGHL,GAAG,CAACE,MAAJ,GAAa,IAAb;EAEO,SAASI,UAAT,CAAoBF,OAApB,EAA6B;EAClCJ,EAAAA,GAAG,CAACE,MAAJ,GAAaE,OAAb;EACD;EACM,SAASG,SAAT,CAAmBH,OAAnB,EAA4B;EACjCJ,EAAAA,GAAG,CAACE,MAAJ,GAAa,IAAb;EACD;;ECpCD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACO,IAAMM,UAAU,GAAG,SAAbA,UAAa,CAACC,EAAD;EAAA,SAAQ,OAAOA,EAAP,KAAc,UAAtB;EAAA,CAAnB;EACA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,GAAD;EAAA,SAAS,QAAOA,GAAP,MAAe,QAAf,IAA2BA,GAAG,KAAK,IAA5C;EAAA,CAAjB;EACA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,GAAD;EAAA,SAASC,KAAK,CAACF,OAAN,CAAcC,GAAd,CAAT;EAAA,CAAhB;EAEP,IAAME,SAAS,GAAG,EAAlB;EACA,IAAIC,SAAO,GAAG,KAAd;;EAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;EAC3BF,EAAAA,SAAS,CAACxB,OAAV,CAAkB,UAAC2B,EAAD;EAAA,WAAQA,EAAE,EAAV;EAAA,GAAlB;EACAF,EAAAA,SAAO,GAAG,KAAV;EACD,CAHD;EAKA;EACA;EACA;EACA;EACA;;;EACA,SAASG,KAAT,CAAeF,cAAf,EAA+B;EAC7B,MAAIG,OAAO,GAAG,mBAAM,EAApB;;EAEA,MAAIC,OAAJ,EAAa;EACXD,IAAAA,OAAO,GAAG,mBAAM;EACdC,MAAAA,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAuBN,cAAvB;EACD,KAFD;EAGD,GAJD,MAIO,IAAIO,gBAAJ,EAAsB;EAC3B,QAAIC,QAAQ,GAAGrC,QAAQ,CAACK,cAAT,CAAwB,GAAxB,CAAf;EACA,QAAIiC,OAAO,GAAG,IAAIF,gBAAJ,CAAqBP,cAArB,CAAd;EACAS,IAAAA,OAAO,CAACA,OAAR,CAAgBD,QAAhB,EAA0B;EACxBE,MAAAA,aAAa,EAAE;EADS,KAA1B;;EAGAP,IAAAA,OAAO,GAAG,mBAAM;EACdK,MAAAA,QAAQ,CAACG,WAAT,GAAuB,GAAvB;EACD,KAFD;EAGD,GATM,MASA,IAAIC,YAAJ,EAAkB;EACvBT,IAAAA,OAAO,GAAG,mBAAM;EACdS,MAAAA,YAAY,CAACZ,cAAD,CAAZ;EACD,KAFD;EAGD,GAJM,MAIA;EACLG,IAAAA,OAAO,GAAG,mBAAM;EACdU,MAAAA,UAAU,CAACb,cAAD,CAAV;EACD,KAFD;EAGD;;EACDG,EAAAA,OAAO;EACR;;EAEM,SAASW,QAAT,CAAkBb,EAAlB,EAAsB;EAC3BH,EAAAA,SAAS,CAAC5E,IAAV,CAAe+E,EAAf;;EAEA,MAAI,CAACF,SAAL,EAAc;EACZG,IAAAA,KAAK,CAACF,cAAD,CAAL;EACAD,IAAAA,SAAO,GAAG,IAAV;EACD;EACF;;EC5DD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAIA,IAAIgB,KAAK,GAAG,EAAZ;EACA,IAAIC,GAAG,GAAG,EAAV;EAEA,IAAIjB,OAAO,GAAG,KAAd;EACO,SAASkB,YAAT,CAAsB9B,OAAtB,EAA+B;EACpC,MAAML,EAAE,GAAGK,OAAX;;EACA,MAAI6B,GAAG,CAAClC,EAAD,CAAH,IAAW,IAAf,EAAqB;EACnBiC,IAAAA,KAAK,CAAC7F,IAAN,CAAWiE,OAAX;EACA6B,IAAAA,GAAG,CAAClC,EAAD,CAAH,GAAU,IAAV;;EACA,QAAI,CAACiB,OAAL,EAAc;EACZe,MAAAA,QAAQ,CAACI,mBAAD,CAAR;EACAnB,MAAAA,OAAO,GAAG,IAAV;EACD;EACF;EACF;;EAED,SAASmB,mBAAT,GAA+B;EAC7B,OAAK,IAAI5H,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGyH,KAAK,CAACxH,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;EACrCyH,IAAAA,KAAK,CAACzH,CAAD,CAAL,CAAS6H,GAAT;EACD;;EACDJ,EAAAA,KAAK,GAAG,EAAR;EACAC,EAAAA,GAAG,GAAG,EAAN;EACAjB,EAAAA,OAAO,GAAG,KAAV;EACD;;EC/BD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EACA,IAAIjB,EAAE,GAAG,CAAT;;MACMsC;EACJ,mBAAYlD,EAAZ,EAAgBmD,QAAhB,EAA0BpB,EAA1B,EAA8BqB,OAA9B,EAAuC;EAAA;;EACrC,SAAKpD,EAAL,GAAUA,EAAV;EACA,SAAKmD,QAAL,GAAgBA,QAAhB;EACA,SAAKpB,EAAL,GAAUA,EAAV;EACA,SAAKqB,OAAL,GAAeA,OAAf;EACA,SAAKxC,EAAL,GAAUA,EAAE,EAAZ,CALqC;;EAOrC,SAAKyC,MAAL,GAAcF,QAAd;EACA,SAAKG,IAAL,GAAY,EAAZ;EACA,SAAKC,MAAL,GAAc,IAAIC,GAAJ,EAAd,CATqC;;EAWrC,SAAKC,GAAL;EACD;;;;;aAED,eAAM;EACJ;EACA;EACAtC,MAAAA,UAAU,CAAC,IAAD,CAAV,CAHI;;EAKJ,WAAKkC,MAAL,GALI;;EAOJjC,MAAAA,SAAS;EACV;;;aACD,gBAAOsC,GAAP,EAAY;EACV,UAAI9C,EAAE,GAAG8C,GAAG,CAAC9C,EAAb,CADU;;EAGV,UAAI,CAAC,KAAK2C,MAAL,CAAYT,GAAZ,CAAgBlC,EAAhB,CAAL,EAA0B;EACxB;EACA,aAAK2C,MAAL,CAAYI,GAAZ,CAAgB/C,EAAhB;EACA,aAAK0C,IAAL,CAAUtG,IAAV,CAAe0G,GAAf,EAHwB;;EAKxBA,QAAAA,GAAG,CAACE,MAAJ,CAAW,IAAX;EACD;EACF;;;aACD,kBAAS;EACP;EACAb,MAAAA,YAAY,CAAC,IAAD,CAAZ;EACD;;;aACD,eAAM;EACJ,WAAKU,GAAL;EACD;;;;;;ECrDH;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAMO,SAASI,cAAT,CAAwBC,GAAxB,EAA6B;EAClCA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,OAAd,GAAwB,UAAU1E,KAAV,EAAiB;EACvClB,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;EACA,QAAM2B,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACiE,GAAH,GAAS7E,KAAK,CAACY,EAAE,CAACiE,GAAJ,EAAS3E,KAAT,CAAd;EACD,GAJD;;EAKAwE,EAAAA,GAAG,CAACC,SAAJ,CAAcG,SAAd,GAA0BtB,QAA1B;EACD;EAEM,SAASuB,cAAT,CAAwBnE,EAAxB,EAA4B/D,EAA5B,EAAgC;EACrC;EACA,MAAImI,eAAe,GAAG,SAAlBA,eAAkB,GAAM;EAC1B;EACApE,IAAAA,EAAE,CAACgE,OAAH,CAAWhE,EAAE,CAACqE,OAAH,EAAX,EAF0B;;EAI3B,GAJD,CAFqC;EAQrC;EACA;;;EACA,MAAInB,OAAJ,CACElD,EADF,EAEEoE,eAFF,EAGE,YAAM;EACJhG,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;EACD,GALH,EAME,IANF;EAQD;;ECxCD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,IAAMiG,iBAAiB,GAAG3C,KAAK,CAACoC,SAAhC;EACA,IAAMQ,YAAY,GAAGC,MAAM,CAACC,MAAP,CAAcH,iBAAd,CAArB;EAEA,IAAMI,OAAO,GAAG,CACd,MADc,EAEd,KAFc,EAGd,OAHc,EAId,SAJc,EAKd,QALc,EAMd,SANc,EAOd,MAPc,CAAhB;EAUAA,OAAO,CAACtE,OAAR,CAAgB,UAACuE,MAAD,EAAY;EAC1BJ,EAAAA,YAAY,CAACI,MAAD,CAAZ,GAAuB,YAAmB;EAAA;;EAAA,sCAANC,IAAM;EAANA,MAAAA,IAAM;EAAA;;EACxC,6BAAAN,iBAAiB,CAACK,MAAD,CAAjB,EAA0BE,IAA1B,+BAA+B,IAA/B,SAAwCD,IAAxC;;EACA,QAAIE,QAAJ;EACA,QAAIC,EAAE,GAAG,KAAKC,MAAd;;EACA,YAAQL,MAAR;EACE,WAAK,MAAL;EACA,WAAK,SAAL;EACEG,QAAAA,QAAQ,GAAGF,IAAX,CADF;;EAEE;;EACF,WAAK,QAAL;EACEE,QAAAA,QAAQ,GAAGF,IAAI,CAAC7I,KAAL,CAAW,CAAX,CAAX;EACA;EAPJ;;EAWA,QAAI+I,QAAJ,EAAc;EACZC,MAAAA,EAAE,CAACE,YAAH,CAAgBH,QAAhB;EACD,KAjBuC;;;EAmBxCC,IAAAA,EAAE,CAACrB,GAAH,CAAOwB,MAAP;EACD,GApBD;EAqBD,CAtBD;;ECjBA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEA;;MACMC;EACJ,oBAAYpF,IAAZ,EAAkB;EAAA;;EAChB,SAAK2D,GAAL,GAAW,IAAI7C,GAAJ,EAAX,CADgB;EAGhB;;EACA2D,IAAAA,MAAM,CAACY,cAAP,CAAsBrF,IAAtB,EAA4B,QAA5B,EAAsC;EACpCtE,MAAAA,KAAK,EAAE,IAD6B;EAEpC;EACA4J,MAAAA,UAAU,EAAE;EAHwB,KAAtC,EAJgB;;EAUhB,QAAI5D,OAAO,CAAC1B,IAAD,CAAX,EAAmB;EACjB;EACAA,MAAAA,IAAI,CAACuF,SAAL,GAAiBf,YAAjB;EACA,WAAKU,YAAL,CAAkBlF,IAAlB;EACD,KAJD,MAIO;EACL,WAAKwF,IAAL,CAAUxF,IAAV;EACD;EACF;;;;;aAED,sBAAaA,IAAb,EAAmB;EACjB;EACAA,MAAAA,IAAI,CAACK,OAAL,CAAa,UAACoF,IAAD;EAAA,eAAUjD,OAAO,CAACiD,IAAD,CAAjB;EAAA,OAAb;EACD;;;aACD,cAAKzF,IAAL,EAAW;EACTyE,MAAAA,MAAM,CAACiB,IAAP,CAAY1F,IAAZ,EAAkBK,OAAlB,CAA0B,UAACI,GAAD,EAAS;EACjCkF,QAAAA,cAAc,CAAC3F,IAAD,EAAOS,GAAP,EAAYT,IAAI,CAACS,GAAD,CAAhB,CAAd;EACD,OAFD;EAGD;;;;;EAGH;EACA;EACA;EACA;EACA;;;EACA,SAASmF,WAAT,CAAqBlK,KAArB,EAA4B;EAC1B,OAAK,IAAIL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGK,KAAK,CAACJ,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;EACrC,QAAMwK,OAAO,GAAGnK,KAAK,CAACL,CAAD,CAArB;EACAwK,IAAAA,OAAO,CAACZ,MAAR,IAAkBY,OAAO,CAACZ,MAAR,CAAetB,GAAf,CAAmBmC,MAAnB,EAAlB;;EACA,QAAIpE,OAAO,CAACmE,OAAD,CAAX,EAAsB;EACpBD,MAAAA,WAAW,CAACC,OAAD,CAAX;EACD;EACF;EACF;;EAED,SAASF,cAAT,CAAwB3F,IAAxB,EAA8BS,GAA9B,EAAmC/E,KAAnC,EAA0C;EACxC;EACA;EACA,MAAIqK,OAAO,GAAGvD,OAAO,CAAC9G,KAAD,CAArB;EACA2C,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuByH,OAAvB,EAJwC;;EAMxC,MAAIpC,GAAG,GAAG,IAAI7C,GAAJ,EAAV;EACA2D,EAAAA,MAAM,CAACY,cAAP,CAAsBrF,IAAtB,EAA4BS,GAA5B,EAAiC;EAC/BiD,IAAAA,GAD+B,iBACzB;EACJ;EACA,UAAI5C,GAAG,CAACE,MAAR,EAAgB;EACd;EACA2C,QAAAA,GAAG,CAACmC,MAAJ,GAFc;;EAId,YAAIC,OAAJ,EAAa;EACX;EACAA,UAAAA,OAAO,CAACpC,GAAR,CAAYmC,MAAZ;;EACA,cAAIpE,OAAO,CAAChG,KAAD,CAAX,EAAoB;EAClBkK,YAAAA,WAAW,CAAClK,KAAD,CAAX;EACD;EACF;EACF;;EACD,aAAOA,KAAP;EACD,KAhB8B;EAiB/BsK,IAAAA,GAjB+B,eAiB3BC,MAjB2B,EAiBnB;EACV,UAAIA,MAAM,KAAKvK,KAAf,EAAsB,OADZ;;EAGV8G,MAAAA,OAAO,CAACyD,MAAD,CAAP;EACAvK,MAAAA,KAAK,GAAGuK,MAAR;EACAtC,MAAAA,GAAG,CAACwB,MAAJ;EACD;EAvB8B,GAAjC;EAyBD;;EAEM,SAAS3C,OAAT,CAAiBxC,IAAjB,EAAuB;EAC5B;EACA;EACA,MAAI,CAACwB,QAAQ,CAACxB,IAAD,CAAb,EAAqB;EACnB;EACD,GAL2B;;;EAO5B,MAAIA,IAAI,CAACiF,MAAT,EAAiB;EACf,WAAOjF,IAAI,CAACiF,MAAZ;EACD;;EACD,SAAO,IAAIG,QAAJ,CAAapF,IAAb,CAAP;EACD;EAGD;EACA;EACA;;EC3GA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EACO,SAASkG,SAAT,CAAmBjG,EAAnB,EAAuB;EAC5B5B,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyB2B,EAAE,CAACkG,QAA5B;EACA,MAAMC,IAAI,GAAGnG,EAAE,CAACkG,QAAhB,CAF4B;EAI5B;EAEA;EACA;;EAEA,MAAIC,IAAI,CAACpG,IAAT,EAAe;EACbqG,IAAAA,QAAQ,CAACpG,EAAD,CAAR;EACD,GAX2B;EAc5B;EAEA;EACA;;EACD;;EAED,SAASqG,KAAT,CAAerG,EAAf,EAAmBsG,MAAnB,EAA2B9F,GAA3B,EAAgC;EAC9BgE,EAAAA,MAAM,CAACY,cAAP,CAAsBpF,EAAtB,EAA0BQ,GAA1B,EAA+B;EAC7BiD,IAAAA,GAD6B,iBACvB;EACJ,aAAOzD,EAAE,CAACsG,MAAD,CAAF,CAAW9F,GAAX,CAAP;EACD,KAH4B;EAI7BuF,IAAAA,GAJ6B,eAIzBC,MAJyB,EAIjB;EACVhG,MAAAA,EAAE,CAACsG,MAAD,CAAF,CAAW9F,GAAX,IAAkBwF,MAAlB;EACD;EAN4B,GAA/B;EAQD;;EAED,SAASI,QAAT,CAAkBpG,EAAlB,EAAsB;EACpB,MAAID,IAAI,GAAGC,EAAE,CAACkG,QAAH,CAAYnG,IAAvB;EACAA,EAAAA,IAAI,GAAGC,EAAE,CAACuG,KAAH,GAAWlF,UAAU,CAACtB,IAAD,CAAV,GAAmBA,IAAI,CAAC8E,IAAL,CAAU7E,EAAV,CAAnB,GAAmCD,IAArD;;EACA,OAAK,IAAMS,GAAX,IAAkBT,IAAlB,EAAwB;EACtBsG,IAAAA,KAAK,CAACrG,EAAD,EAAK,OAAL,EAAcQ,GAAd,CAAL;EACD,GALmB;;;EAOpB+B,EAAAA,OAAO,CAACxC,IAAD,CAAP;EACD;;EClDD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAMA;EACA;EACA;EACA;EACA;EACA;;EACO,SAASyG,SAAT,CAAmB1C,GAAnB,EAAwB;EAC7BA,EAAAA,GAAG,CAACC,SAAJ,CAAc0C,KAAd,GAAsB,UAAUrD,OAAV,EAAmB;EACvC;EACA,QAAMpD,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACkG,QAAH,GAAc9C,OAAd;EACA6C,IAAAA,SAAS,CAACjG,EAAD,CAAT;;EAEA,QAAIA,EAAE,CAACkG,QAAH,CAAYjK,EAAhB,EAAoB;EAClB;EACA+D,MAAAA,EAAE,CAAC0G,MAAH,CAAU1G,EAAE,CAACkG,QAAH,CAAYjK,EAAtB;EACD;EACF,GAVD;;EAWA6H,EAAAA,GAAG,CAACC,SAAJ,CAAc2C,MAAd,GAAuB,UAAUzK,EAAV,EAAc;EACnC,QAAM+D,EAAE,GAAG,IAAX;EACA,QAAMoD,OAAO,GAAGpD,EAAE,CAACkG,QAAnB;EACAjK,IAAAA,EAAE,GAAGgE,QAAQ,CAAC0G,aAAT,CAAuB1K,EAAvB,CAAL;EACA+D,IAAAA,EAAE,CAACiE,GAAH,GAAShI,EAAT;;EACA,QAAI,CAACmH,OAAO,CAAClE,MAAb,EAAqB;EACnB,UAAI0H,QAAQ,GAAGxD,OAAO,CAACwD,QAAvB;;EACA,UAAI,CAACA,QAAD,IAAa3K,EAAjB,EAAqB;EACnBmC,QAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ,EAAkBpC,EAAlB;EACA2K,QAAAA,QAAQ,GAAG3K,EAAE,CAAC4K,SAAd;EACA,YAAI3H,MAAM,GAAGH,iBAAiB,CAAC6H,QAAD,CAA9B;EACAxD,QAAAA,OAAO,CAAClE,MAAR,GAAiBA,MAAjB;EACD;EACF;;EACDd,IAAAA,OAAO,CAACC,GAAR,CAAY+E,OAAO,CAAClE,MAApB,EAdmC;;EAgBnCiF,IAAAA,cAAc,CAACnE,EAAD,CAAd;EACD,GAjBD;EAkBD;;ECjDD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACO,SAASE,aAAT,CAAuBF,EAAvB,EAA2B9C,GAA3B,EAAwD;EAAA,MAAxB6C,IAAwB,uEAAjB,EAAiB;;EAAA,oCAAV7D,QAAU;EAAVA,IAAAA,QAAU;EAAA;;EAC7D,SAAOoD,KAAK,CAACU,EAAD,EAAK9C,GAAL,EAAU6C,IAAV,EAAgBA,IAAI,CAACS,GAArB,EAA0BtE,QAA1B,EAAoC4K,SAApC,CAAZ;EACD;EAEM,SAASC,iBAAT,CAA2B/G,EAA3B,EAA+BvD,IAA/B,EAAqC;EAC1C,SAAO6C,KAAK,CAACU,EAAD,EAAK8G,SAAL,EAAgBA,SAAhB,EAA2BA,SAA3B,EAAsCA,SAAtC,EAAiDrK,IAAjD,CAAZ;EACD;;EAED,SAAS6C,KAAT,CAAeU,EAAf,EAAmB9C,GAAnB,EAAwB6C,IAAxB,EAA8BS,GAA9B,EAAmCtE,QAAnC,EAA6CO,IAA7C,EAAmD;EACjD,SAAO;EAAEuD,IAAAA,EAAE,EAAFA,EAAF;EAAM9C,IAAAA,GAAG,EAAHA,GAAN;EAAW6C,IAAAA,IAAI,EAAJA,IAAX;EAAiBS,IAAAA,GAAG,EAAHA,GAAjB;EAAsBtE,IAAAA,QAAQ,EAARA,QAAtB;EAAgCO,IAAAA,IAAI,EAAJA;EAAhC,GAAP;EACD;;ECfD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EACO,SAASuK,WAAT,CAAqBlD,GAArB,EAA0B;EAC/BA,EAAAA,GAAG,CAACC,SAAJ,CAAckD,EAAd,GAAmB,UAAU/J,GAAV,EAAe6C,IAAf,EAAkC;EAAA,sCAAV7D,QAAU;EAAVA,MAAAA,QAAU;EAAA;;EACnD;EACA,WAAOgE,aAAa,MAAb,UAAc,IAAd,oCAAuBvE,SAAvB,GAAP;EACD,GAHD;;EAIAmI,EAAAA,GAAG,CAACC,SAAJ,CAAcmD,EAAd,GAAmB,UAAUzK,IAAV,EAAgB;EACjC,WAAOsK,iBAAiB,CAAC,IAAD,EAAOtK,IAAP,CAAxB;EACD,GAFD;;EAGAqH,EAAAA,GAAG,CAACC,SAAJ,CAAcoD,EAAd,GAAmB,UAAUC,GAAV,EAAe;EAChC,QAAI7F,QAAQ,CAAC6F,GAAD,CAAZ,EAAmB;EACjB,aAAOvL,IAAI,CAACC,SAAL,CAAesL,GAAf,CAAP;EACD;;EACD,WAAOA,GAAP;EACD,GALD;;EAMAtD,EAAAA,GAAG,CAACC,SAAJ,CAAcM,OAAd,GAAwB,YAAY;EAClCjG,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;EACA,QAAM2B,EAAE,GAAG,IAAX;EACA,QAAId,MAAM,GAAGc,EAAE,CAACkG,QAAH,CAAYhH,MAAzB;EACA,QAAII,KAAK,GAAGJ,MAAM,CAAC2F,IAAP,CAAY7E,EAAZ,CAAZ;EACA,WAAOV,KAAP;EACD,GAND;EAOD;;EC5BD;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EACA,SAASwE,GAAT,CAAaV,OAAb,EAAsB;EACpB,OAAKqD,KAAL,CAAWrD,OAAX;EACD;;EAEDoD,SAAS,CAAC1C,GAAD,CAAT;EACAkD,WAAW,CAAClD,GAAD,CAAX;;EACAD,cAAc,CAACC,GAAD,CAAd;;;;;;;;"}
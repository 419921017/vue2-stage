{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["/*\r\n * @Descripttion: your project\r\n * @version: 1.0\r\n * @Author: power_840\r\n * @Date: 2021-06-17 21:35:20\r\n * @LastEditors: power_840\r\n * @LastEditTime: 2021-06-17 21:42:42\r\n */\r\nexport const isFunction = (fn) => typeof fn === \"function\";\r\nexport const isObject = (obj) => typeof obj === \"object\" && obj !== null;\r\n","import { isObject } from \"../utils\";\r\n\r\n/*\r\n * @Descripttion: your project\r\n * @version: 1.0\r\n * @Author: power_840\r\n * @Date: 2021-06-17 21:38:12\r\n * @LastEditors: power_840\r\n * @LastEditTime: 2021-06-17 21:55:14\r\n */\r\n\r\nclass Observer {\r\n  constructor(data) {\r\n    this.walk(data);\r\n  }\r\n  walk(data) {\r\n    Object.keys(data).forEach((key) => {\r\n      defineReactive(data, key, data[key]);\r\n    });\r\n  }\r\n}\r\n\r\nfunction defineReactive(data, key, value) {\r\n  // value有可能是对象\r\n  // 如果value是对象, 需要进行递归处理\r\n  observe(value);\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      return value;\r\n    },\r\n    set(newVal) {\r\n      // 设置了新对象, 需要重新进行劫持\r\n      observe(newVal);\r\n      value = newVal;\r\n    },\r\n  });\r\n}\r\n\r\nexport function observe(data) {\r\n  console.log(\"observe\", data);\r\n  if (!isObject(data)) {\r\n    return;\r\n  }\r\n  return new Observer(data);\r\n}\r\n","import { observe } from \"./observer\";\r\nimport { isFunction } from \"./utils\";\r\n\r\n/*\r\n * @Descripttion: your project\r\n * @version: 1.0\r\n * @Author: power_840\r\n * @Date: 2021-06-17 21:29:52\r\n * @LastEditors: power_840\r\n * @LastEditTime: 2021-06-17 21:51:46\r\n */\r\nexport function initState(vm) {\r\n  console.log(\"initState\", vm.$options);\r\n  const opts = vm.$options;\r\n  // if (opts.props) {\r\n  // }\r\n\r\n  // if (opts.methods) {\r\n  // }\r\n\r\n  if (opts.data) {\r\n    initData(vm);\r\n  }\r\n\r\n  // if (opts.computed) {\r\n  // }\r\n\r\n  // if (opts.watch) {\r\n  // }\r\n}\r\n\r\nfunction initData(vm) {\r\n  let data = vm.$options.data;\r\n  data = vm._data = isFunction(data) ? data.call(vm) : data;\r\n  // console.log(\"initData\", data);\r\n  observe(data);\r\n}\r\n","/*\r\n * @Descripttion: your project\r\n * @version: 1.0\r\n * @Author: power_840\r\n * @Date: 2021-06-17 21:24:30\r\n * @LastEditors: power_840\r\n * @LastEditTime: 2021-06-17 21:30:25\r\n */\r\n\r\nimport { initState } from \"./state\";\r\n\r\n/**\r\n *\r\n * 在Vue的基础上做一次混合操作\r\n * @export\r\n * @param {*} Vue\r\n */\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    // console.log(\"options\", options);\r\n    const vm = this;\r\n    vm.$options = options;\r\n    initState(vm);\r\n  };\r\n}\r\n","import { initMixin } from \"./init\";\r\n\r\n/*\r\n * @Descripttion: your project\r\n * @version: 1.0\r\n * @Author: power_840\r\n * @Date: 2021-06-17 21:07:28\r\n * @LastEditors: power_840\r\n * @LastEditTime: 2021-06-17 21:25:51\r\n */\r\nfunction Vue(options) {\r\n  this._init(options);\r\n}\r\n\r\ninitMixin(Vue);\r\n\r\nexport default Vue;\r\n"],"names":["isFunction","fn","isObject","obj","Observer","data","walk","Object","keys","forEach","key","defineReactive","value","observe","defineProperty","get","set","newVal","console","log","initState","vm","$options","opts","initData","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":"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"}
{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/global-api/index.js","../src/compiler/generate.js","../src/compiler/parser.js","../src/compiler/index.js","../src/vdom/patch.js","../src/observer/dep.js","../src/observer/scheduler.js","../src/observer/watcher.js","../src/lifecycle.js","../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-17 21:35:20\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-28 22:12:17\n */\nexport const isFunction = (fn) => typeof fn === 'function';\nexport const isString = (str) => typeof str === 'string';\nexport const isNumber = (num) => typeof num === 'number';\nexport const isObject = (obj) => typeof obj === 'object' && obj !== null;\nexport const isArray = (arr) => Array.isArray(arr);\n\nconst callbacks = [];\nlet pending = false;\n\nconst flushCallbacks = () => {\n  callbacks.forEach((cb) => cb());\n  pending = false;\n};\n\n/**\n * 调度系统的优雅降级\n *\n * @param {*} flushCallbacks\n */\nfunction timer(flushCallbacks) {\n  let timerFn = () => {};\n\n  if (Promise) {\n    timerFn = () => {\n      Promise.resolve().then(flushCallbacks);\n    };\n  } else if (MutationObserver) {\n    let textNode = document.createTextNode('1');\n    let observe = new MutationObserver(flushCallbacks);\n    observe.observe(textNode, {\n      characterData: true,\n    });\n    timerFn = () => {\n      textNode.textContent = '3';\n    };\n  } else if (setImmediate) {\n    timerFn = () => {\n      setImmediate(flushCallbacks);\n    };\n  } else {\n    timerFn = () => {\n      setTimeout(flushCallbacks);\n    };\n  }\n  timerFn();\n}\n\nexport function nextTick(cb) {\n  callbacks.push(cb);\n\n  if (!pending) {\n    timer(flushCallbacks);\n    pending = true;\n  }\n}\n\nlet lifeCycleHooks = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestory',\n  'destoryed',\n];\n\nlet structs = {};\n\nfunction mergeHook(parentVal, childVal) {\n  if (childVal) {\n    if (parentVal) {\n      return parentVal.concat(childVal);\n    } else {\n      return [childVal];\n    }\n  } else {\n    return parentVal;\n  }\n}\n\nlifeCycleHooks.forEach((hook) => {\n  structs[hook] = mergeHook;\n});\n\nstructs.components = function (parentVal, childVal) {\n  // 创建了一个对象 Object._proto_\n  let options = Object.create(parentVal);\n  if (childVal) {\n    for (const key in childVal) {\n      if (Object.hasOwnProperty.call(childVal, key)) {\n        // 先查找自身, 如果没有通过原型链查找\n        options[key] = childVal[key];\n      }\n    }\n  }\n  return options;\n};\n\nexport function mergeOptions(parent, child) {\n  const options = {};\n  for (let key in parent) {\n    mergeFieId(key);\n  }\n  for (let key in child) {\n    if (key in parent) {\n      continue;\n    }\n    mergeFieId(key);\n  }\n  function mergeFieId(key) {\n    let parentVal = parent[key];\n    let childVal = child[key];\n    if (structs[key]) {\n      options[key] = structs[key](parentVal, childVal);\n    } else if (isObject(parentVal) && isObject(childVal)) {\n      options[key] = { ...parentVal, ...childVal };\n    } else {\n      options[key] = childVal || parentVal;\n    }\n  }\n  return options;\n}\n\nexport function isReservedTag(tagName) {\n  let reservedTag = 'a, div, span, p, img, button, ul, li';\n  return reservedTag.includes(tagName);\n}\n","import { mergeOptions } from '../utils';\n\n/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-28 21:05:53\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-28 22:13:31\n */\nexport function initGlobalApi(Vue) {\n  // 用来存储全局配置\n  // 每个组件初始化的时候都会和options选项进行合并\n  Vue.options = {};\n  Vue.mixin = function (options) {\n    this.options = mergeOptions(this.options, options);\n  };\n  // 后续无论创建多少个子类, 都可以通过_base找到Vue\n  Vue.options._base = Vue;\n  Vue.options.components = {};\n  Vue.component = function (id, definition) {\n    // 保证组件的隔离, 每个组件都要创建一个新类, 继承父类\n    definition = this.options._base.extend(definition);\n    this.options.components[id] = definition;\n  };\n\n  // 产生一个继承Vue的类\n  Vue.extend = function (opts) {\n    const Super = this;\n    const Sub = function VueComponent(options) {\n      this._init(options);\n    };\n    Sub.prototype = Object.create(Super.prototype);\n    Sub.prototype.constructor = Sub;\n    // 只和Vue的options合并\n    Sub.options = mergeOptions(Super.options, opts);\n\n    return Sub;\n  };\n}\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-22 21:30:18\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-24 20:12:11\n */\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\nfunction genProps(attrs) {\n  let str = '';\n  for (let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i];\n    if (attr.name === 'style') {\n      let styleObj = {};\n      attr.value.replace(/([^;:]+)\\:([^;:]+)/g, function () {\n        styleObj[arguments[1].trim()] = arguments[2].trim();\n      });\n      attr.value = styleObj;\n    }\n    str += `${attr.name}: ${JSON.stringify(attr.value)},`;\n  }\n  return `{${str.slice(0, -1)}}`;\n}\n\nfunction genChildren(el) {\n  let children = el.children;\n\n  if (children) {\n    return children.map((child) => gen(child)).join(',');\n  }\n  return false;\n}\n\nfunction gen(el) {\n  if (el.type == 1) {\n    return generate(el);\n  } else {\n    let text = el.text.trim();\n    if (!defaultTagRE.test(text)) {\n      return `_v('${text}')`;\n    } else {\n      let tokens = [];\n      let match;\n      // exec和正则中的g冲突, 每次操作的时候都要重置成0\n      let lastIndex = (defaultTagRE.lastIndex = 0);\n      while ((match = defaultTagRE.exec(text))) {\n        let index = match.index;\n        if (index > lastIndex) {\n          tokens.push(JSON.stringify(text.slice(lastIndex, index)));\n        }\n        tokens.push(`_s(${match[1].trim()})`);\n        lastIndex = index + match[0].length;\n      }\n      if (lastIndex < text.length) {\n        tokens.push(JSON.stringify(text.slice(lastIndex)));\n      }\n      return `_v(${tokens.join('+')})`;\n    }\n  }\n}\n\nexport function generate(el) {\n  let children = genChildren(el);\n\n  let code = `_c('${el.tag}',${\n    el.attrs && el.attrs.length > 0 ? genProps(el.attrs) : 'undefined'\n  }${children ? `,${children}` : ''})`;\n\n  return code;\n}\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-22 21:17:10\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-22 21:18:21\n */\n\n// 标签名\nconst ncname = `[a-zA-Z_][\\\\w\\\\-\\\\.]*`;\n// 获取标签名, match[1]\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\n// 开始标签\nconst startTagOpen = new RegExp(`^<${qnameCapture}`);\n// 结束标签\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`);\n// 属性\nconst attribute =\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\n// 标签关闭\nconst startTagClose = /^\\s*(\\/?)>/;\n// {{}}\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g;\n\nexport function parserHTML(html) {\n  let stack = [];\n  let root = null;\n  function createASTElement(tag, attrs, parent) {\n    return {\n      tag,\n      type: 1,\n      children: [],\n      parent,\n      attrs,\n    };\n  }\n  function start(tag, attrs) {\n    let parent = stack[stack.length - 1];\n    let element = createASTElement(tag, attrs, parent);\n    if (root == null) {\n      root = element;\n    }\n    if (parent) {\n      // 元素指向父节点\n      element.parent = parent;\n      // 父节点的children属性添加元素\n      parent.children.push(element);\n    }\n    stack.push(element);\n  }\n\n  function end(tag) {\n    let endTag = stack.pop();\n    if (endTag.tag != tag) {\n      console.log('标签出错');\n    }\n  }\n\n  function text(chars) {\n    let parent = stack[stack.length - 1];\n    chars.replace(/\\s/, '');\n    if (chars) {\n      parent.children.push({\n        type: 2,\n        text: chars,\n      });\n    }\n  }\n\n  function advance(len) {\n    html = html.substring(len);\n  }\n  function parseStartTag() {\n    const start = html.match(startTagOpen);\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: [],\n      };\n      advance(start[0].length);\n      let end;\n      let attr;\n      // 不能是开始的结束标签\n      // 必须是属性\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5],\n        });\n        advance(attr[0].length);\n      }\n      if (end) {\n        advance(end[0].length);\n      }\n\n      return match;\n    } else {\n      return false;\n    }\n  }\n\n  while (html) {\n    let index = html.indexOf('<');\n\n    if (index === 0) {\n      // 解析开始标签\n      const startTagMatch = parseStartTag();\n\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n      let endTagMatch;\n      if ((endTagMatch = html.match(endTag))) {\n        end(endTagMatch[1]);\n        advance(endTagMatch[0].length);\n        continue;\n      }\n\n      break;\n    }\n    // 文本\n    if (index > 0) {\n      let chars = html.substring(0, index);\n      if (chars) {\n        text(chars);\n        advance(chars.length);\n      }\n    }\n  }\n  return root;\n}\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-21 20:40:53\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-23 21:16:27\n */\n\nimport { generate } from './generate';\nimport { parserHTML } from './parser';\n\nexport function compileToFunction(tempalte) {\n  const ast = parserHTML(tempalte);\n\n  let code = generate(ast);\n  // html => ast(只能描述语法) => render函数 => vdom(增加额外属性) => 生成真实DOM\n  // new Function + width\n  let render = new Function(`with(this) {return ${code}}`);\n  return render;\n}\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-24 19:46:04\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-24 20:22:35\n */\nexport function patch(oldVnode, vnode) {\n  // 没有el元素, 说明是组件\n  if (!oldVnode) {\n    // 直接将虚拟节点转换成真实节点\n    return createEle(vnode);\n  }\n\n  // 元素节点\n  if (oldVnode.nodeType == 1) {\n    // console.log(\"真实节点\");\n    const parentElm = oldVnode.parentNode;\n\n    let elm = createEle(vnode);\n    parentElm.insertBefore(elm, oldVnode.nextSibling);\n    parentElm.removeChild(oldVnode);\n    return elm;\n  } else {\n    // 标签名不一致, 直接替换\n    if (oldVnode.tag !== vnode.tag) {\n      return oldVnode.el.parentNode.replaceChild(createEle(vnode), oldVnode.el);\n    }\n    // 如果两个虚拟节点是文本节点, 需要比较本文内容\n    // 新的标签和老的标签都是undefined, 两者都是文本\n    if (vnode.tag == undefined) {\n      if (oldVnode.text !== vnode.text) {\n        el.textContent = vnode.text;\n      }\n    }\n    // 标签一样, 新节点el复用老节点的el\n    vnode.el = oldVnode.el;\n    // 如果标签一样, 比较属性\n    patchProps(vnode, oldVnode.data);\n\n    let newChildren = vnode.children || [];\n    let oldChildren = oldVnode.children || [];\n    if (oldChildren.length > 0 && newChildren.length > 0) {\n      patchChildren(el, oldChildren, newChildren);\n    } else if (newChildren.length > 0) {\n      for (const single of newChildren) {\n        let child = createEle(single);\n        el.appendChild(child);\n      }\n    } else if (oldChildren.length > 0) {\n      el.innerHTML = ``;\n    }\n  }\n}\n\nfunction isSameVnode(oldVnode, newVnode) {\n  return oldVnode.tag == newVnode.tag && oldVnode.key == newVnode.key;\n}\n\n/**\n * vue的diff算法使用的是双指针\n *\n * @param {*} el\n * @param {*} oldChildren\n * @param {*} newChildren\n */\nfunction patchChildren(el, oldChildren, newChildren) {\n  let oldStartIndex = 0;\n  let oldStartVnode = oldChildren[0];\n  let oldEndIndex = oldChildren.length - 1;\n  let oldEndNode = oldChildren[oldChildren.length - 1];\n\n  let newStartIndex = 0;\n  let newStartNode = newChildren[0];\n  let newEndIndex = newChildren.length - 1;\n  let newEndNode = newChildren[newChildren.length - 1];\n\n  // 同时循环老的和新的节点, 有一方循环完了就直接结束\n  while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\n    if (isSameVnode(oldStartVnode, newStartVnode)) {\n      // 头头比较\n      patch(oldStartVnode, newStartNode);\n    }\n  }\n}\n\n/**\n * 创建真实节点\n *\n * @export\n * @param {*} vnode\n * @return {*}\n */\nexport function createEle(vnode) {\n  let { tag, data, children, text, vm } = vnode;\n  if (typeof tag === 'string') {\n    // 如果是组件\n    if (createComponent(vnode)) {\n      return vnode.componentInstance.$el;\n    }\n    vnode.el = document.createElement(tag);\n    patchProps(vnode);\n    // updateProperties(vnode);\n    children.forEach((child) => {\n      vnode.el.appendChild(createEle(child));\n    });\n  } else {\n    vnode.el = document.createTextNode(text);\n  }\n  return vnode.el;\n}\n\n/**\n * 初次渲染挂载属性\n * 再次渲染, 更新属性\n * @param {*} vnode\n * @param {*} newProps\n */\nfunction patchProps(vnode, oldProps = {}) {\n  let newProps = vnode.data || {};\n  let el = vnode.el;\n\n  let newStyle = newProps.style || {};\n  let oldStyle = oldProps.style || {};\n\n  // 老的有, 新的没有, 需要删除\n  for (const key in oldStyle) {\n    if (Object.hasOwnProperty.call(oldStyle, key)) {\n      if (!newStyle[key]) {\n        el.style[key] = '';\n      }\n    }\n  }\n\n  for (const key in oldProps) {\n    if (Object.hasOwnProperty.call(oldProps, key)) {\n      if (!newProps[key]) {\n        el.removeAttribute(key);\n      }\n    }\n  }\n  for (let key in newProps) {\n    if (key == 'style') {\n      for (let styleName in newProps.style) {\n        el.style[styleName] = newProps.style[styleName];\n      }\n    } else {\n      el.setAttribute(key, newProps[key]);\n    }\n  }\n}\n\nfunction updateProperties(vnode) {\n  let newProps = vnode.data || {};\n  let el = vnode.el;\n  for (let key in newProps) {\n    if (key == 'style') {\n      for (let styleName in newProps.style) {\n        el.style[styleName] = newProps.style[styleName];\n      }\n    } else {\n      el.setAttribute(key, newProps[key]);\n    }\n  }\n}\n\nfunction createComponent(vnode) {\n  let i = vnode.data;\n  // 判断加赋值\n  if ((i = i.hook) && (i = i.init)) {\n    // 调用init方法\n    i(vnode);\n  }\n  // 说明子组件已经new完毕了, 并且组件对应的真实DOM已经挂载到了componentInstance.$el上\n  if (vnode.componentInstance) {\n    return true;\n  }\n}\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-24 20:35:31\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-25 19:22:48\n */\n\nlet id = 0;\n// 每个属性都分配一个dep, dep可以存放watcher, 一个dep对应多个watcher, 一个watcher对应多个dep\nclass Dep {\n  constructor() {\n    this.id = id++;\n    this.subs = [];\n  }\n  depend() {\n    if (Dep.target) {\n      Dep.target.addDep(this);\n    }\n  }\n  addSub(watcher) {\n    this.subs.push(watcher);\n  }\n  notify() {\n    this.subs.forEach((watcher) => watcher.update());\n  }\n}\n\nDep.target = null;\n\n// 使用栈的方式存放多个watcher\nlet stack = [];\n\nexport function pushTarget(watcher) {\n  stack.push(watcher);\n  Dep.target = watcher;\n}\nexport function popTarget(watcher) {\n  stack.pop();\n  Dep.target = stack[stack.length - 1];\n}\n\nexport default Dep;\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-24 21:33:35\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-24 21:39:22\n */\n\nimport { nextTick } from '../utils';\n\nlet queue = [];\nlet has = {};\n\nlet pending = false;\nexport function queueWatcher(watcher) {\n  const id = watcher;\n  if (has[id] == null) {\n    queue.push(watcher);\n    has[id] = true;\n    if (!pending) {\n      nextTick(flushSchedulerQueue, 0);\n      pending = true;\n    }\n  }\n}\n\nfunction flushSchedulerQueue() {\n  for (let i = 0; i < queue.length; i++) {\n    queue[i].run();\n  }\n  queue = [];\n  has = {};\n  pending = false;\n}\n","import { isString } from '../utils';\nimport { popTarget, pushTarget } from './dep';\nimport { queueWatcher } from './scheduler';\n\n/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-24 20:25:22\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-25 19:42:54\n */\nlet id = 0;\nclass Watcher {\n  constructor(vm, exprOrFn, cb, options) {\n    this.vm = vm;\n    this.exprOrFn = exprOrFn;\n    // 是不是用户watcher\n    this.user = !!options.user;\n    // 使用lazy区分是否是计算属性\n    this.lazy = !!options.lazy;\n    this.dirty = !!options.lazy;\n    this.cb = cb;\n    this.options = options;\n    this.id = id++;\n    // exprOrFn一调用就会取值\n    if (isString(exprOrFn)) {\n      // 如果表达式是字符串, 转换成函数\n      this.getter = function () {\n        // 当数据取值时, 会进行依赖收集\n        let obj = vm;\n        // 字符串有\".\", 说明是对象的多层\n        return exprOrFn.split('.').reduce((a, b) => a[b], obj);\n        // for (const item of exprOrFn.split('.')) {\n        //   obj = obj[item];\n        // }\n        // return obj;\n      };\n    } else {\n      this.getter = exprOrFn;\n    }\n    // 对应的收集\n    this.deps = [];\n    // 对应的收集id\n    this.depsId = new Set();\n    // 默认的初始化操作\n    // lazy指的是computed\n    this.value = this.lazy ? undefined : this.get();\n  }\n  // 数据更新时, 重新调用getter\n  get() {\n    // 每个属性都可以收集自己的watcher, 一个属性对应多个watcher, 一个watcher对应多个属性\n    // Dep.target = watcher\n    pushTarget(this);\n    // render()方法会去vm上取值, vm._update(vm._render())\n    const value = this.getter.call(this.vm);\n    // Dep.target = null, 如果Dep.target有值, 说明值在模板中使用了\n    popTarget();\n    return value;\n  }\n  addDep(dep) {\n    let id = dep.id;\n    // 实现去重\n    if (!this.depsId.has(id)) {\n      // watcher收集dep\n      this.depsId.add(id);\n      this.deps.push(dep);\n      // dep收集watcher\n      dep.addSub(this);\n    }\n  }\n  update() {\n    // this.get();\n    if (this.lazy) {\n      this.dirty = true;\n    } else {\n      queueWatcher(this);\n    }\n  }\n  run() {\n    const newValue = this.get();\n    let oldValue = this.value;\n    // 替换旧值\n    this.value = newValue;\n    // console.log('this.cb', this.cb);\n    this.user && this.cb.call(this.vm, newValue, oldValue);\n  }\n  evaluate() {\n    // 取过值了\n    this.dirty = false;\n    this.value = this.get();\n  }\n  depend() {\n    let i = this.deps.length;\n    while (i--) {\n      this.deps[i].depend();\n    }\n  }\n}\n\n// 将更新功能封装成了一个watcher\n// 渲染页面前, 会将当前watcher放到Dep类上\n// 在vue找那个渲染页面使用的属性, 需要进行依赖收集, 收集对象的渲染watcher\n// 取值时, 给每个属性都加了dep属性, 用于存储这个渲染watcher, 同一个watcher会对应多个dep\n// 每给属性可能对应多个视图(多个watcher), 一个属性对应多个watcher\n// dep.depend(), 通知dep存放watcher => Dep.target.addDep(), 通知watcher存放dep\n// dep和watcher是双向取值的\nexport default Watcher;\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-23 21:18:30\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-28 22:08:56\n */\n\nimport { patch } from './vdom/patch';\nimport Watcher from './observer/watcher';\nimport { nextTick } from './utils';\n\nexport function lifecycleMixin(Vue) {\n  Vue.prototype._update = function (vnode) {\n    const vm = this;\n    vm.$el = patch(vm.$el, vnode);\n  };\n  Vue.prototype.$nextTick = nextTick;\n}\n\nexport function mountComponent(vm, el) {\n  // 更新函数, 数据变化后会再次调用\n  let updateComponent = () => {\n    // 调用render函数, 生成虚拟dom\n    vm._update(vm._render());\n    // 用虚拟dom生成真实dom\n  };\n  callHook(vm, 'beforeMount');\n  // updateComponent();\n  // true表示这是一个渲染watcher\n  // 每个组件都对一个渲染watcher\n  new Watcher(\n    vm,\n    updateComponent,\n    () => {\n      console.log('update');\n    },\n    true\n  );\n  callHook(vm, 'mounted');\n}\n\nexport function callHook(vm, hook) {\n  vm.$options[hook] && vm.$options[hook].forEach((fn) => fn.call(vm));\n}\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-21 20:23:55\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-21 20:50:04\n */\nconst oldArrayPrototype = Array.prototype;\nconst arrayMethods = Object.create(oldArrayPrototype);\n\nconst methods = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'reverse',\n  'sort',\n];\n\nmethods.forEach((method) => {\n  arrayMethods[method] = function (...args) {\n    oldArrayPrototype[method].call(this, ...args);\n    let inserted;\n    let ob = this.__ob__;\n    switch (method) {\n      case 'push':\n      case 'unshfit':\n        inserted = args; // 就是新增的内容\n        break;\n      case 'splice':\n        inserted = args.slice(2);\n        break;\n      default:\n        break;\n    }\n    if (inserted) {\n      ob.observeArray(inserted);\n    }\n    // 数组的observe.dep\n    ob.dep.notify();\n  };\n});\n\nexport default arrayMethods;\n","import { isArray, isObject } from '../utils';\nimport arrayMethods from './array';\nimport Dep from './dep';\n\n/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-17 21:38:12\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-24 21:10:10\n */\n\n// 给对象新增一个属性, 不会触发更新, 可以通过$set, 给对象本身增加一个dep, dep存watcher, 如果增加一个属性后, 手动触发watcher\nclass Observer {\n  constructor(data) {\n    this.dep = new Dep();\n    // 给对象和数组添加一个自定义属性\n    // __ob__ 会造成死循环\n    Object.defineProperty(data, '__ob__', {\n      value: this,\n      // 这属性不能被枚举, 无法被循环到\n      enumerable: false,\n    });\n    // data.__ob__ = this;\n    if (isArray(data)) {\n      // 重写数组方法\n      data.__proto__ = arrayMethods;\n      this.observeArray(data);\n    } else {\n      this.walk(data);\n    }\n  }\n  // 递归遍历数组, 对数组内部的对象再次进行重写[[]] [{}]\n  observeArray(data) {\n    // 数组里面如果是引用类型, 继续进行observe, 响应式\n    data.forEach((item) => observe(item));\n  }\n  walk(data) {\n    Object.keys(data).forEach((key) => {\n      defineReactive(data, key, data[key]);\n    });\n  }\n}\n\n/**\n * 数组的子元素还是数组的情况\n *\n * @param {*} value\n */\nfunction dependArray(value) {\n  for (let i = 0; i < value.length; i++) {\n    const current = value[i];\n    current.__ob__ && current.__ob__.dep.depend();\n    if (isArray(current)) {\n      dependArray(current);\n    }\n  }\n}\n\nfunction defineReactive(data, key, value) {\n  // value有可能是对象\n  // 如果value是对象, 需要进行递归处理\n  let childOb = observe(value);\n  // 每个属性都对应一个dep\n  let dep = new Dep();\n  Object.defineProperty(data, key, {\n    get() {\n      // 如果Dep.target有值, 说明属性在模板中被使用了\n      if (Dep.target) {\n        // dep记住watcher\n        dep.depend();\n        // 可能是数组, 可能是对象\n        if (childOb) {\n          // 数组和对象也记住watcher\n          childOb.dep.depend();\n          if (isArray(value)) {\n            dependArray(value);\n          }\n        }\n      }\n      return value;\n    },\n    set(newVal) {\n      if (newVal === value) return;\n      // 设置了新对象, 需要重新进行劫持\n      observe(newVal);\n      value = newVal;\n      dep.notify();\n    },\n  });\n}\n\nexport function observe(data) {\n  // console.log(\"observe\", data);\n  // 不是对象不处理\n  if (!isObject(data)) {\n    return;\n  }\n  // 已经响应式的对象不处理\n  if (data.__ob__) {\n    return data.__ob__;\n  }\n  return new Observer(data);\n}\n\n// 1. Vue中对象层次不能嵌套太深, 否则会有大量递归\n// 2. Vue中对象是通过Object.definePrototype实现响应式的, 拦截了get和set, 如果不存在的属性不会拦截, 也不会响应\n//    可以使用$set来让对象自己来实现notify, 或者赋予一个新对象\n// 3. Vue中数组修改索引或者长度也不会进行视图更新, 通过修改原型的7个方法从而达成视图更新, 数组中如果是对象类型, 修改对象也可以更新视图\n","import { observe } from './observer';\nimport Dep from './observer/dep';\nimport Watcher from './observer/watcher';\nimport { isArray, isFunction } from './utils';\n\n/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-17 21:29:52\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-25 19:25:56\n */\nexport function stateMixin(Vue) {\n  Vue.prototype.$watch = function (key, handler, options = {}) {\n    // user标识\n    options.user = true;\n    let watcher = new Watcher(this, key, handler, options);\n    // 立即执行\n    if (options.immediate) {\n      handler(watcher.value);\n    }\n  };\n}\n\nexport function initState(vm) {\n  const opts = vm.$options;\n  // if (opts.props) {\n  // }\n\n  // if (opts.methods) {\n  // }\n\n  if (opts.data) {\n    initData(vm);\n  }\n\n  if (opts.computed) {\n    initComputed(vm, opts.computed);\n  }\n\n  if (opts.watch) {\n    initWatch(vm, opts.watch);\n  }\n}\n\n/**\n * 代理\n *\n * @param {*} vm 实例this\n * @param {*} source 目标source\n * @param {*} key key值\n * @return {*}\n */\nfunction proxy(vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key];\n    },\n    set(newVal) {\n      vm[source][key] = newVal;\n    },\n  });\n}\n\n/**\n * 初始化data, 如果是函数就执行并绑定this到实例上, 进行响应式监听\n *\n * @param {*} vm\n */\nfunction initData(vm) {\n  let data = vm.$options.data;\n  data = vm._data = isFunction(data) ? data.call(vm) : data;\n  // 通过_data进行代理\n  for (const key in data) {\n    proxy(vm, '_data', key);\n  }\n  // 对数据进行响应式监听\n  observe(data);\n}\n\n/**\n * 初始化watch\n *\n * @param {*} vm\n * @param {*} watch\n */\nfunction initWatch(vm, watch) {\n  Object.keys(watch).forEach((key) => {\n    const handler = watch[key];\n    // handler是否是数组\n    if (isArray(handler)) {\n      for (const fn of handler) {\n        createWatcher(vm, key, fn);\n      }\n    } else {\n      createWatcher(vm, key, handler);\n    }\n  });\n}\n\n/**\n * 创建watcher\n *\n * @param {*} vm\n * @param {*} key\n * @param {*} handler\n * @return {*}\n */\nfunction createWatcher(vm, key, handler) {\n  return vm.$watch(key, handler);\n}\n\n/**\n * 初始化computed\n *\n * @param {*} vm\n * @param {*} computed\n */\nfunction initComputed(vm, computed) {\n  // 包含实例上所有的watcher属性\n  const watchers = (vm._computedWatchers = {});\n  Object.keys(computed).forEach((key) => {\n    // computed可能是函数也有可能是对象\n    const userDef = computed[key];\n    let getter = isFunction(userDef) ? userDef : userDef.get;\n    // console.log('getter', getter);\n    // NOTE: 每个计算属性, 本质上是一个watcher\n    watchers[key] = new Watcher(vm, getter, () => {}, {\n      lazy: true,\n    });\n    defineComputed(vm, key, userDef);\n  });\n}\n\n/**\n * 定义computed\n *\n * @param {*} vm\n * @param {*} key\n * @param {*} userDef\n */\nfunction defineComputed(vm, key, userDef) {\n  let sharedProperty = {};\n  if (isFunction(userDef)) {\n    sharedProperty.get = userDef;\n  } else {\n    sharedProperty.get = createComputedGetter(key);\n    sharedProperty.set = userDef.set;\n  }\n  // computed本质上就是是个 Object.defineProperty\n  Object.defineProperty(vm, key, sharedProperty);\n}\n\nfunction createComputedGetter(key) {\n  // 取计算属性的值\n  return function computedGetter() {\n    // 这个watcher中包含了getter\n    let watcher = this._computedWatchers[key];\n    // 根据dirty属性来判断是否需要重新求值\n    // 脏就是意味着需要调用用户的getter\n    // 不脏就不用调用用户的getter\n    if (watcher.dirty) {\n      watcher.evaluate();\n    }\n    // 如果渲染watcher存在, 计算属性也需要收集渲染watcher\n    if (Dep.target) {\n      // watcher属性对应多个dep\n      // 计算属性watcher对应内部有多个dep(computed所依赖的属性)\n      watcher.depend();\n    }\n    return watcher.value;\n  };\n}\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-17 21:24:30\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-28 22:12:29\n */\n\nimport { compileToFunction } from './compiler';\nimport { callHook, mountComponent } from './lifecycle';\nimport { initState } from './state';\nimport { mergeOptions } from './utils';\n\n/**\n *\n * 在Vue的基础上做一次混合操作\n * @export\n * @param {*} Vue\n */\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this;\n    // vm.constructor.options, 继承的时候不一定是根Vue可能是Vue.extends. 所以要找到构造函数, 找构造函数上的options\n    vm.$options = mergeOptions(vm.constructor.options, options);\n    callHook(vm, 'beforeCreate');\n    initState(vm);\n    callHook(vm, 'created');\n    if (vm.$options.el) {\n      // 将数据挂在模板上\n      vm.$mount(vm.$options.el);\n    }\n  };\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    const options = vm.$options;\n    el = document.querySelector(el);\n    vm.$el = el;\n    if (!options.render) {\n      let template = options.template;\n      if (!template && el) {\n        template = el.outerHTML;\n      }\n      let render = compileToFunction(template);\n      options.render = render;\n    }\n\n    // 组件的挂载流程\n    mountComponent(vm, el);\n  };\n}\n","/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-23 21:31:22\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-23 21:35:54\n */\n\nimport { isObject, isReservedTag } from '../utils';\n\n/**\n *\n *\n * @export\n * @param {*} vm\n * @param {*} tag 标签名, 组件名\n * @param {*} [data={}]\n * @param {*} children\n * @return {*}\n */\nexport function createElement(vm, tag, data = {}, ...children) {\n  if (isReservedTag(tag)) {\n    return vnode(vm, tag, data, data.key, children, undefined);\n  } else {\n    const Ctor = vm.$options.components[tag];\n    return createComponent(vm, tag, data, data.key, children, Ctor);\n  }\n}\n\nexport function createTextElement(vm, text) {\n  return vnode(vm, undefined, undefined, undefined, undefined, text);\n}\n\n/**\n * 创建组件的组件的虚拟节点\n *\n * @export\n * @param {*} vm\n * @param {*} tag\n * @param {*} data\n * @param {*} key\n * @param {*} children\n * @param {*} Ctor\n *\n * 1. 给组件创建一个构造函数, 基于Vue\n * 2. 开始生成虚拟节点, 对组件进行特殊处理, data.hook = { init() {} }\n * 3. 生成dom节点, 如果当前虚拟节点有hook.init属性, 说明是组件\n * 4. 对自己进行new 组件().$mount() => vm.$el, 将组件对应的真实节点挂载到实例的$el上\n * 5. 将组件的$el插入到父容器中(父组件)\n */\nexport function createComponent(vm, tag, data, key, children, Ctor) {\n  if (isObject(Ctor)) {\n    Ctor = vm.$options._base.extend(Ctor);\n  }\n\n  // 渲染组件时需要调用该初始化方法\n  data.hook = {\n    init(vnode) {\n      let vm = (vnode.componentInstance = new Ctor({ _isComponent: true }));\n      // 组件挂载完成后, vm.$el => 真实节点, vm.$el对应的是组件的真实dom\n      vm.$mount();\n    },\n  };\n\n  return vnode(vm, `vue-component-${tag}`, data, key, undefined, undefined, {\n    Ctor,\n    children,\n  });\n}\n\nfunction vnode(vm, tag, data, key, children, text, componentOptions) {\n  return { vm, tag, data, key, children, text, componentOptions };\n}\n","import { isObject } from './utils';\nimport { createElement, createTextElement } from './vdom';\n\n/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-23 21:23:10\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-24 19:59:20\n */\nexport function renderMixin(Vue) {\n  Vue.prototype._c = function (tag, data, ...children) {\n    // @ts-ignore\n    return createElement(this, ...arguments);\n  };\n  Vue.prototype._v = function (text) {\n    return createTextElement(this, text);\n  };\n  Vue.prototype._s = function (val) {\n    if (isObject(val)) {\n      return JSON.stringify(val);\n    }\n    return val;\n  };\n  Vue.prototype._render = function () {\n    const vm = this;\n    let render = vm.$options.render;\n    let vnode = render.call(vm);\n    return vnode;\n  };\n}\n","import { initGlobalApi } from './global-api';\nimport { initMixin } from './init';\nimport { lifecycleMixin } from './lifecycle';\nimport { renderMixin } from './render';\nimport { stateMixin } from './state';\n\n/*\n * @Descripttion: your project\n * @version: 1.0\n * @Author: power_840\n * @Date: 2021-06-17 21:07:28\n * @LastEditors: power_840\n * @LastEditTime: 2021-06-28 21:06:52\n */\nfunction Vue(options) {\n  this._init(options);\n}\n\ninitMixin(Vue);\nrenderMixin(Vue); // _render\nlifecycleMixin(Vue); // _update\nstateMixin(Vue); // $watch\n\n// 在类上扩展 Vue.mixin\ninitGlobalApi(Vue);\n\nexport default Vue;\n"],"names":["isFunction","fn","isString","str","isObject","obj","isArray","arr","Array","callbacks","pending","flushCallbacks","forEach","cb","timer","timerFn","Promise","resolve","then","MutationObserver","textNode","document","createTextNode","observe","characterData","textContent","setImmediate","setTimeout","nextTick","push","lifeCycleHooks","structs","mergeHook","parentVal","childVal","concat","hook","components","options","Object","create","key","hasOwnProperty","call","mergeOptions","parent","child","mergeFieId","isReservedTag","tagName","reservedTag","includes","initGlobalApi","Vue","mixin","_base","component","id","definition","extend","opts","Super","Sub","VueComponent","_init","prototype","constructor","defaultTagRE","genProps","attrs","i","length","attr","name","styleObj","value","replace","arguments","trim","JSON","stringify","slice","genChildren","el","children","map","gen","join","type","generate","text","test","tokens","match","lastIndex","exec","index","code","tag","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parserHTML","html","stack","root","createASTElement","start","element","end","pop","console","log","chars","advance","len","substring","parseStartTag","indexOf","startTagMatch","endTagMatch","compileToFunction","tempalte","ast","render","Function","patch","oldVnode","vnode","createEle","nodeType","parentElm","parentNode","elm","insertBefore","nextSibling","removeChild","replaceChild","undefined","patchProps","data","newChildren","oldChildren","patchChildren","single","appendChild","innerHTML","isSameVnode","newVnode","oldStartIndex","oldStartVnode","oldEndIndex","newStartIndex","newStartNode","newEndIndex","newStartVnode","vm","createComponent","componentInstance","$el","createElement","oldProps","newProps","newStyle","style","oldStyle","removeAttribute","styleName","setAttribute","init","Dep","subs","target","addDep","watcher","update","pushTarget","popTarget","queue","has","queueWatcher","flushSchedulerQueue","run","Watcher","exprOrFn","user","lazy","dirty","getter","split","reduce","a","b","deps","depsId","Set","get","dep","add","addSub","newValue","oldValue","depend","lifecycleMixin","_update","$nextTick","mountComponent","updateComponent","_render","callHook","$options","oldArrayPrototype","arrayMethods","methods","method","args","inserted","ob","__ob__","observeArray","notify","Observer","defineProperty","enumerable","__proto__","walk","item","keys","defineReactive","dependArray","current","childOb","set","newVal","stateMixin","$watch","handler","immediate","initState","initData","computed","initComputed","watch","initWatch","proxy","source","_data","createWatcher","watchers","_computedWatchers","userDef","defineComputed","sharedProperty","createComputedGetter","computedGetter","evaluate","initMixin","$mount","querySelector","template","outerHTML","Ctor","createTextElement","_isComponent","componentOptions","renderMixin","_c","_v","_s","val"],"mappings":"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"}